<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ARTS 003 :: Lei&#x27;s Notebook</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../../_/css/site-c40d8d4d09.css">
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="nav-logo" href="../../.."></a>
      <div id="topbar-nav" class="navbar-menu">
        <div class="navbar-end">
                <a class="navbar-item-section navbar-item navbar-topics" href="../../../arts/">
                  <img alt="ARTS" src="/_/img/blog-e21e601f33.svg">
                  ARTS
                </a>
        </div>
      </div>
      <div class="navbar-fill"></div>
      <div class="break-row"></div>
      <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<a id="top"></a>
<div class="body">
<div class="nav-container" data-component="arts" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active">
  <nav class="nav-menu" data-panel="menu">
    <h3 class="title"><a href="../index.html">ARTS</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">ARTS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2021</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-05-07-ARTS-001.html">ARTS 001</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-08-ARTS-002.html">ARTS 002</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="2021-11-15-ARTS-003.html">ARTS 003</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-25-ARTS-004.html">ARTS 004</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-12-02-ARTS-005.html">ARTS 005</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2022</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-03-ARTS-006.html">ARTS 006</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-07-ARTS-007.html">ARTS 007</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-14-ARTS-008.html">ARTS 008</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-21-ARTS-009.html">ARTS 009</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-04-07-ARTS-010.html">ARTS 010</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-04-19-ARTS-011.html">ARTS 011</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ARTS</span>
<span class="version">latest</span>  </div>
  <ul class="components">
    <li class="component is-current"><span class="title">ARTS</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">latest</a>
        </li>
      </ul></li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<nav class="toolbar">
<button class="nav-toggle" aria-label="Toggle submenu"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>ARTS</li>
    <li>2021</li>
    <li><a href="2021-11-15-ARTS-003.html">ARTS 003</a></li>
  </ul>
</nav>
</nav>
  <div class="content">
<article class="doc">
<h1 class="page">ARTS 003</h1>
<div class="sect1">
<h2 id="_algorithm"><a class="anchor" href="#_algorithm"></a>Algorithm</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import org.junit.jupiter.api.Test;

import java.util.HashMap;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * @link https://leetcode.com/problems/lru-cache/
 * @author zhanglei
 * @date 2021/11/15
 */
class P0146 {
    static class LRUCache {

        int maxLength;
        int currentLength;
        Map&lt;Integer, Node&gt; map;
        Node head = new Node(0, 0);
        Node tail = new Node(0, 0);

        public LRUCache(int capacity) {
            maxLength = capacity;
            map = new HashMap&lt;&gt;(capacity);
            head.next = tail;
            tail.prev = head;
        }

        public int get(int key) {
            Node node = map.get(key);
            if (node == null) {
                return -1;
            }
            remove(node);
            insert(node);
            return node.value;
        }

        public void put(int key, int value) {
            Node node = map.get(key);
            if (node == null) {
                if (currentLength == maxLength) {
                    remove(tail.prev);
                }
            } else {
                remove(node);
            }
            insert(new Node(key, value));
        }

        public void remove(Node node) {
            node.prev.next = node.next;
            node.next.prev = node.prev;
            map.remove(node.key);
            currentLength--;
        }

        public void insert(Node node) {
            head.next.prev = node;
            node.next = head.next;
            head.next = node;
            node.prev = head;
            map.put(node.key, node);
            currentLength++;
        }
    }

    static class Node {
        int key;
        int value;
        Node prev;
        Node next;

        public Node(int key, int value) {
            this.key = key;
            this.value = value;
        }
    }

    @Test
    void test() {
        LRUCache lRUCache = new LRUCache(2);
        lRUCache.put(1, 1); // cache is {1=1}
        lRUCache.put(2, 2); // cache is {1=1, 2=2}
        assertEquals(1, lRUCache.get(1)); // return 1
        lRUCache.put(3, 3); // LRU key was 2, evicts key 2, cache is {1=1, 3=3}
        assertEquals(-1, lRUCache.get(2)); // returns -1 (not found)
        lRUCache.put(4, 4); // LRU key was 1, evicts key 1, cache is {4=4, 3=3}
        assertEquals(-1, lRUCache.get(1)); // return -1 (not found)
        assertEquals(3, lRUCache.get(3)); // return 3
        assertEquals(4, lRUCache.get(4)); // return 4
    }

    @Test
    void test2() {
        LRUCache lRUCache = new LRUCache(2);
        lRUCache.put(2, 1);
        lRUCache.put(2, 2);
        assertEquals(2, lRUCache.get(2));
        lRUCache.put(1, 1);
        lRUCache.put(4, 1);
        assertEquals(-1, lRUCache.get(2));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_review"><a class="anchor" href="#_review"></a>Review</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_blackboard_pattern_for_autonomous_navigation"><a class="anchor" href="#_the_blackboard_pattern_for_autonomous_navigation"></a><a href="https://dzone.com/articles/the-blackboard-pattern-for-autonomous-navigation">The Blackboard Pattern for Autonomous Navigation</a></h3>
<div class="paragraph">
<p><span class="image"><img src="_images/Design%20Patterns/blackboard-pattern-components.png" alt="blackboard pattern components"></span></p>
</div>
<div class="paragraph">
<p>Blackboard Pattern is one of Artificial intelligence pattern, Blackboard use Observer pattern to notify Controller, it&#8217;s like MVC.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tip"><a class="anchor" href="#_tip"></a>Tip</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use lambda expression to remove a whole layer of boilerplate code from Strategy Pattern</p>
</div>
<div class="listingblock">
<div class="title">before</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface CompressionStrategy {
    public OutputStream compress(OutputStream data) throws IOException;
}

public class GzipCompressionStrategy implements CompressionStrategy {
    @Override
    public OutputStream compress(OutputStream data) throws IOException {
        return new GZIPOutputStream(data);
    }
}

public class Compressor {
    private final CompressionStrategy strategy;

    public Compressor(CompressionStrategy strategy) {
        this.strategy = strategy;
    }

    public void compress(Path inFile, File outFile) throws IOException {
        try (OutputStream outStream = new FileOutputStream(outFile)) {
            Files.copy(inFile, strategy.compress(outStream));
        }
    }
}

Compressor gzipCompressor = new Compressor(new GzipCompressionStrategy());
gzipCompressor.compress(inFile, outFile);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">after use lambdas</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface CompressionStrategy {
    public OutputStream compress(OutputStream data) throws IOException;
}

public class Compressor {
    private final CompressionStrategy strategy;

    public Compressor(CompressionStrategy strategy) {
        this.strategy = strategy;
    }

    public void compress(Path inFile, File outFile) throws IOException {
        try (OutputStream outStream = new FileOutputStream(outFile)) {
            Files.copy(inFile, strategy.compress(outStream));
        }
    }
}

Compressor gzipCompressor = new Compressor(GZIPOutputStream::new);
gzipCompressor.compress(inFile, outFile);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share"><a class="anchor" href="#_share"></a>Share</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dive_into_design_patterns"><a class="anchor" href="#_dive_into_design_patterns"></a><a href="https://refactoring.guru/design-patterns">Dive Into DESIGN PATTERNS</a></h3>
<div class="paragraph">
<p>The book Dive Into Design Patterns illustrates 22 classic design patterns, and 8 design principles that these patterns are based on.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
    <div class="footer-tools">
        <a href="#top" title="Reach the top of the page">Back to top</a>
    </div>
<script src="../../../_/js/vendor/algoliasearch-77ad57d83c.js"></script>
<script src="../../../_/js/site-ca1c0b0367.js"></script>
<script async src="../../../_/js/vendor/highlight-0a351063af.js"></script>
<script async src="../../../_/js/vendor/svg4everybody-195d47ce7d.js"></script>
              </body>
</html>

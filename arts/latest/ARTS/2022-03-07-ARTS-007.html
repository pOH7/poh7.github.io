<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ARTS 007 :: Lei&#x27;s Notebook</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../../_/css/site-c40d8d4d09.css">
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="nav-logo" href="../../.."></a>
      <div id="topbar-nav" class="navbar-menu">
        <div class="navbar-end">
                <a class="navbar-item-section navbar-item navbar-topics" href="../../../arts/">
                  <img alt="ARTS" src="/_/img/blog-e21e601f33.svg">
                  ARTS
                </a>
        </div>
      </div>
      <div class="navbar-fill"></div>
      <div class="break-row"></div>
      <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<a id="top"></a>
<div class="body">
<div class="nav-container" data-component="arts" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active">
  <nav class="nav-menu" data-panel="menu">
    <h3 class="title"><a href="../index.html">ARTS</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">ARTS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2021</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-05-07-ARTS-001.html">ARTS-001</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-08-ARTS-002.html">ARTS-002</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-15-ARTS-003.html">ARTS-003</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-25-ARTS-004.html">ARTS-004</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-12-02-ARTS-005.html">ARTS-005</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2022</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-03-ARTS-006.html">ARTS-006</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="2022-03-07-ARTS-007.html">ARTS-007</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ARTS</span>
<span class="version">latest</span>  </div>
  <ul class="components">
    <li class="component is-current"><span class="title">ARTS</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">latest</a>
        </li>
      </ul></li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<nav class="toolbar">
<button class="nav-toggle" aria-label="Toggle submenu"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>ARTS</li>
    <li>2022</li>
    <li><a href="2022-03-07-ARTS-007.html">ARTS-007</a></li>
  </ul>
</nav>
</nav>
  <div class="content">
<article class="doc">
<h1 class="page">ARTS 007</h1>
<div class="sect1">
<h2 id="_algorithm"><a class="anchor" href="#_algorithm"></a>Algorithm</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_704_binary_search"><a class="anchor" href="#_704_binary_search"></a>704. Binary Search</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p07;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 704. Binary Search
 *
 * @link https://leetcode.com/problems/binary-search/
 * @author zhanglei
 * @date 2022/2/22
 */
@Slf4j
class P0704 {

    public int search(int[] nums, int target) {
        int low = 0;
        int high = nums.length - 1;
        while (low &lt;= high) {
            int mid = (low + high) &gt;&gt;&gt; 1;
            if (target &gt; nums[mid]) {
                low = mid + 1;
            } else if (target &lt; nums[mid]) {
                high = mid - 1;
            } else if (target == nums[mid]) {
                return mid;
            }
        }
        return -1;
    }

    /*
    // not good
    public int search(int[] nums, int target) {
        int low = 0;
        int high = nums.length - 1;
        while (low &lt;= high) {
            int mid = (low + high) &gt;&gt;&gt; 1;
            log.info("low = {}, high = {}, mid = {}", low, high, mid);
            if (target == nums[mid]) {
                return mid;
            } else if (low == high) {
                return -1;
            } else if (target &gt; nums[mid]) {
                low = mid + 1;
            } else if (target &lt; nums[mid]) {
                high = mid - 1;
            }
        }
        return -1;
    }
    */

    @Test
    void test1() {
        int[] nums = {-1, 0, 3, 5, 9, 12};
        assertEquals(4, search(nums, 9));
    }

    @Test
    void test2() {
        int[] nums = {-1, 0, 3, 5, 9, 12};
        assertEquals(-1, search(nums, 2));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_27_remove_element"><a class="anchor" href="#_27_remove_element"></a>27. Remove Element</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import org.junit.jupiter.api.Test;

import java.util.Arrays;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 27. Remove Element
 *
 * @link https://leetcode.com/problems/remove-element/
 * @author zhanglei
 * @date 2022/2/22
 */
class P0027 {

    public int removeElement(int[] nums, int val) {
        int i = 0;
        int j = 0;
        while (j &lt;= nums.length - 1) {
            if (nums[j] == val) {
                j++;
            } else {
                nums[i++] = nums[j++];
            }
        }
        return i;
    }

    /*
    public int removeElement(int[] nums, int val) {
        int i = 0;
        int j = nums.length;
        while (i &lt; j) {
            if (nums[i] == val) {
                nums[i] = nums[--j];
            } else {
                i++;
            }
        }
        return i;
    }
     */

    /*
    // not good
    public int removeElement(int[] nums, int val) {
        int i = 0;
        int j = nums.length;
        while (i &lt; j) {
            if (nums[i] == val) {
                exchange(nums, i, --j);
            } else {
                i++;
            }
        }
        return i;
    }

    static void exchange(int[] nums, int i, int j) {
        int t = nums[j];
        nums[j] = nums[i];
        nums[i] = t;
    }
     */

    @Test
    void test1() {
        int[] nums = {3, 2, 2, 3};
        test(nums, 3, 2);
    }

    @Test
    void test2() {
        int[] nums = {0, 1, 2, 2, 3, 0, 4, 2};
        test(nums, 2, 5);
    }

    private void test(int[] nums, int val, int result) {
        assertEquals(result, removeElement(nums, val));
        assertTrue(Arrays.stream(nums).limit(result).allMatch(i -&gt; i != val));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_977_squares_of_a_sorted_array"><a class="anchor" href="#_977_squares_of_a_sorted_array"></a>977. Squares of a Sorted Array</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p09;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import java.util.Arrays;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 977. Squares of a Sorted Array
 *
 * @link https://leetcode.com/problems/squares-of-a-sorted-array/
 * @author zhanglei
 * @date 2022/2/22
 */
@Slf4j
class P0977 {

    public int[] sortedSquares(int[] nums) {
        int[] result = new int[nums.length];
        for (int i = nums.length - 1, neg = 0, pos = nums.length - 1; i &gt;= 0; i--) {
            if (nums[neg] * nums[neg] &lt; nums[pos] * nums[pos]) {
                result[i] = nums[pos] * nums[pos];
                pos--;
            } else {
                result[i] = nums[neg] * nums[neg];
                neg++;
            }
        }

        return result;
    }

    /*
    // not good
    public int[] sortedSquares(int[] nums) {
        int[] result = new int[nums.length];
        int posStart = 0; // &gt;=0
        while (posStart &lt; nums.length) {
            if (nums[posStart] &lt; 0) {
                posStart++;
            } else {
                break;
            }
        }
        log.info("posStart = {}", posStart);
        for (int i = 0, neg = posStart - 1, pos = posStart; i &lt; nums.length; i++) {
            log.info("neg = {}, pos = {}", neg, pos);
            if (neg == -1) {
                result[i] = nums[pos] * nums[pos];
                pos++;
            } else if (pos == nums.length) {
                result[i] = nums[neg] * nums[neg];
                neg--;
            } else if ((-nums[neg]) &gt; nums[pos]) {
                result[i] = nums[pos] * nums[pos];
                pos++;
            } else {
                result[i] = nums[neg] * nums[neg];
                neg--;
            }
        }

        return result;
    }
     */

    @Test
    void test1() {
        int[] nums = {-4, -1, 0, 3, 10};
        int[] result = {0, 1, 9, 16, 100};
        assertEquals(Arrays.toString(result), Arrays.toString(sortedSquares(nums)));
    }

    @Test
    void test2() {
        int[] nums = {-7, -3, 2, 3, 11};
        int[] result = {4, 9, 9, 49, 121};
        assertEquals(Arrays.toString(result), Arrays.toString(sortedSquares(nums)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_209_minimum_size_subarray_sum"><a class="anchor" href="#_209_minimum_size_subarray_sum"></a>209. Minimum Size Subarray Sum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 209. Minimum Size Subarray Sum
 *
 * @link https://leetcode.com/problems/minimum-size-subarray-sum/
 * @author zhanglei
 * @date 2022/2/23
 */
class P0209 {
    public int minSubArrayLen(int target, int[] nums) {
        int i = 0;
        int subArrayLen = nums.length + 1;
        int sum = 0;
        for (int j = 0; j &lt;= nums.length - 1; j++) {
            if (j - i + 1 &gt;= subArrayLen) {
                sum -= nums[i++];
            }
            sum += nums[j];
            while (sum &gt;= target) {
                subArrayLen = j - i + 1;
                sum -= nums[i++];
            }
        }
        return subArrayLen &gt; nums.length ? 0 : subArrayLen;
    }

    @Test
    void test1() {
        int[] nums = {2, 3, 1, 2, 4, 3};
        assertEquals(2, minSubArrayLen(7, nums));
    }

    @Test
    void test2() {
        int[] nums = {1, 4, 4};
        assertEquals(1, minSubArrayLen(4, nums));
    }

    @Test
    void test3() {
        int[] nums = {1, 1, 1, 1, 1, 1, 1, 1};
        assertEquals(0, minSubArrayLen(11, nums));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_59_spiral_matrix_ii"><a class="anchor" href="#_59_spiral_matrix_ii"></a>59. Spiral Matrix II</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.stream.Collectors;

/**
 * 59. Spiral Matrix II
 *
 * @link https://leetcode.com/problems/spiral-matrix-ii/
 * @author zhanglei
 * @date 2022/2/23
 */
@Slf4j
class P0059 {
    public int[][] generateMatrix(int n) {
        int[][] result = new int[n][n];
        int k = 1;
        int i = 0;
        int j = 0;
        int d = 0;
        result[i][j] = k++;
        while (k &lt;= n * n) {
            int[] nextijd = nextijd(result, i, j, d);
            i = nextijd[0];
            j = nextijd[1];
            d = nextijd[2];
            result[i][j] = k++;
        }
        return result;
    }

    static int[] nextijd(int[][] result, int i, int j, int d) {
        int nexti = i;
        int nextj = j;
        int nextd = d;
        switch (d) {
            case 0: // go right
                if (j == result.length - 1 || result[i][j + 1] != 0) {
                    nexti = i + 1;
                    nextd = 1;
                } else {
                    nextj = j + 1;
                }
                break;
            case 1: // go down
                if (i == result.length - 1 || result[i + 1][j] != 0) {
                    nextj = j - 1;
                    nextd = 2;
                } else {
                    nexti = i + 1;
                }
                break;
            case 2: // go left
                if (j == 0 || result[i][j - 1] != 0) {
                    nexti = i - 1;
                    nextd = 3;
                } else {
                    nextj = j - 1;
                }
                break;
            case 3: // go up
                if (i == 0 || result[i - 1][j] != 0) {
                    nextj = j + 1;
                    nextd = 0;
                } else {
                    nexti = i - 1;
                }
                break;
        }
        return new int[] {nexti, nextj, nextd};
    }

    @Test
    void test1() {
        Assertions.assertEquals(
                "[[1, 2, 3],[8, 9, 4],[7, 6, 5]]",
                Arrays.stream(generateMatrix(3))
                        .map(Arrays::toString)
                        .collect(Collectors.joining(",", "[", "]")));
    }

    @Test
    void test2() {
        Assertions.assertEquals(
                "[[1]]",
                Arrays.stream(generateMatrix(1))
                        .map(Arrays::toString)
                        .collect(Collectors.joining(",", "[", "]")));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_203_remove_linked_list_elements"><a class="anchor" href="#_203_remove_linked_list_elements"></a>203. Remove Linked List Elements</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import leetcode.bean.ListNode;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 203. Remove Linked List Elements
 *
 * @link https://leetcode.com/problems/remove-linked-list-elements/
 * @author zhanglei
 * @date 2022/2/23
 */
@Slf4j
public class P0203 {
    public ListNode removeElements(ListNode head, int val) {
        ListNode dummy = new ListNode(0, head);
        ListNode next = dummy;
        while (next.next != null) {
            if (next.next.val == val) {
                ListNode t = next.next;
                next.next = t.next;
                t.next = null;
            } else {
                next = next.next;
            }
            log.info(ListNode.print(dummy));
        }
        return dummy.next;
    }

    @Test
    void test1() {
        assertEquals(
                "[1,2,3,4,5]",
                ListNode.print(removeElements(ListNode.newListNode(1, 2, 6, 3, 4, 5, 6), 6)));
    }

    @Test
    void test2() {
        assertEquals("[]", ListNode.print(removeElements(ListNode.newListNode(), 1)));
    }

    @Test
    void test3() {
        assertEquals("[]", ListNode.print(removeElements(ListNode.newListNode(7, 7, 7, 7), 7)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_707_design_linked_list"><a class="anchor" href="#_707_design_linked_list"></a>707. Design Linked List</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p07;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 707. Design Linked List
 *
 * @link https://leetcode.com/problems/design-linked-list/
 * @author zhanglei
 * @date 2022/2/23
 */
@Slf4j
class P0707 {
    static class MyLinkedList {

        static class Node {
            int val;
            Node next;

            public Node(int val, Node next) {
                this.val = val;
                this.next = next;
            }

            public Node(int val) {
                this(val, null);
            }
        }

        Node dummyHead;
        int size;

        public MyLinkedList() {
            dummyHead = new Node(0);
            size = 0;
        }

        public int get(int index) {
            if (index &lt; 0 || index &gt;= size) {
                return -1;
            }
            Node cur = dummyHead;
            for (int i = 0; i &lt;= index; i++) {
                cur = cur.next;
            }
            return cur.val;
        }

        public void addAtHead(int val) {
            addAtIndex(0, val);
        }

        public void addAtTail(int val) {
            addAtIndex(size, val);
        }

        public void addAtIndex(int index, int val) {
            if (index &lt; 0 || index &gt; size) {
                return;
            }
            Node cur = dummyHead;
            for (int i = 0; i &lt; index; i++) {
                cur = cur.next;
            }
            cur.next = new Node(val, cur.next);
            size++;
        }

        public void deleteAtIndex(int index) {
            if (index &lt; 0 || index &gt;= size) {
                return;
            }
            Node cur = dummyHead;
            for (int i = 1; i &lt;= index; i++) {
                cur = cur.next;
            }
            Node t = cur.next;
            if (t == null) {
                return;
            }
            cur.next = t.next;
            t.next = null;
            size--;
        }
    }

    @Test
    void test1() {
        MyLinkedList myLinkedList = new MyLinkedList();
        myLinkedList.addAtHead(1);
        myLinkedList.addAtTail(3);
        myLinkedList.addAtIndex(1, 2); // linked list becomes 1-&gt;2-&gt;3
        assertEquals(2, myLinkedList.get(1)); // return 2
        myLinkedList.deleteAtIndex(1); // now the linked list is 1-&gt;3
        assertEquals(3, myLinkedList.get(1)); // return 3
    }

    @Test
    void test2() {
        MyLinkedList myLinkedList = new MyLinkedList();
        myLinkedList.addAtHead(1);
        myLinkedList.addAtTail(3);
        myLinkedList.addAtIndex(1, 2);
        assertEquals(2, myLinkedList.get(1));
        myLinkedList.deleteAtIndex(0);
        assertEquals(2, myLinkedList.get(0));
    }

    @Test
    void test3() {
        MyLinkedList myLinkedList = new MyLinkedList();
        myLinkedList.addAtHead(1);
        myLinkedList.addAtTail(3);
        myLinkedList.addAtIndex(1, 2);
        assertEquals(2, myLinkedList.get(1));
        myLinkedList.deleteAtIndex(1);
        assertEquals(3, myLinkedList.get(1));
        assertEquals(-1, myLinkedList.get(3));
        myLinkedList.deleteAtIndex(3);
        myLinkedList.deleteAtIndex(0);
        assertEquals(3, myLinkedList.get(0));
        myLinkedList.deleteAtIndex(0);
        assertEquals(-1, myLinkedList.get(0));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_206_reverse_linked_list"><a class="anchor" href="#_206_reverse_linked_list"></a>206. Reverse Linked List</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import leetcode.bean.ListNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.ListNode.newListNode;
import static leetcode.bean.ListNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 206. Reverse Linked List
 *
 * @link https://leetcode.com/problems/reverse-linked-list/
 * @link
 *     https://leetcode.com/problems/reverse-linked-list/discuss/58125/In-place-iterative-and-recursive-Java-solution
 * @author zhanglei
 * @date 2021/9/29
 */
public class P0206 {

    public ListNode reverseList(ListNode head) {
        ListNode pre = null;
        ListNode cur = head;
        while (cur != null) {
            ListNode next = cur.next;
            cur.next = pre;
            pre = cur;
            cur = next;
        }
        return pre;
    }

    /*
    // iterative solution
    public ListNode reverseList(ListNode head) {
        ListNode newHead = null;
        while (head != null) {
            ListNode next = head.next;
            head.next = newHead;
            newHead = head;
            head = next;
        }
        return newHead;
    }
    */
    /*
    // recursive solution
    public ListNode reverseList(ListNode head) {
        return reverseList(null, head);
    }

    ListNode reverseList(ListNode newHead, ListNode head) {
        if (head == null) {
            return newHead;
        }
        ListNode next = head.next;
        head.next = newHead;
        return reverseList(head, next);
    }
    */

    @Test
    void test1() {
        assertEquals("[5,4,3,2,1]", print(reverseList(newListNode(1, 2, 3, 4, 5))));
    }

    @Test
    void test2() {
        assertEquals("[2,1]", print(reverseList(newListNode(1, 2))));
    }

    @Test
    void test3() {
        assertEquals("[]", print(reverseList(newListNode())));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_24_swap_nodes_in_pairs"><a class="anchor" href="#_24_swap_nodes_in_pairs"></a>24. Swap Nodes in Pairs</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import leetcode.bean.ListNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.ListNode.newListNode;
import static leetcode.bean.ListNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 24. Swap Nodes in Pairs
 *
 * @link https://leetcode.com/problems/swap-nodes-in-pairs/
 * @author zhanglei
 * @date 2022/2/23
 */
class P0024 {
    public ListNode swapPairs(ListNode head) {
        ListNode dummy = new ListNode(0, head);
        ListNode cur = dummy;
        while (cur.next != null &amp;&amp; cur.next.next != null) {
            ListNode n1 = cur.next;
            ListNode n2 = n1.next;
            n1.next = n2.next;
            cur.next = n2;
            n2.next = n1;
            cur = n1;
        }
        return dummy.next;
    }

    @Test
    void test1() {
        assertEquals("[2,1,4,3]", print(swapPairs(newListNode(1, 2, 3, 4))));
    }

    @Test
    void test2() {
        assertEquals("[]", print(swapPairs(newListNode())));
    }

    @Test
    void test3() {
        assertEquals("[1]", print(swapPairs(newListNode(1))));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_19_remove_nth_node_from_end_of_list"><a class="anchor" href="#_19_remove_nth_node_from_end_of_list"></a>19. Remove Nth Node From End of List</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import leetcode.bean.ListNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.ListNode.newListNode;
import static leetcode.bean.ListNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 19. Remove Nth Node From End of List
 *
 * @link https://leetcode.com/problems/remove-nth-node-from-end-of-list/
 * @author zhanglei
 * @date 2021/10/9
 */
class P0019 {

    /** time complexity: O(n) space complexity: O(1) */
    public ListNode removeNthFromEnd(ListNode head, int n) {
        ListNode dummy = new ListNode(0, head);
        ListNode t = dummy;
        ListNode nt = t;
        while (n &gt; 0) {
            nt = nt.next;
            n--;
        }
        while (nt.next != null) {
            t = t.next;
            nt = nt.next;
        }
        ListNode temp = t.next;
        t.next = temp.next;
        temp.next = null;
        return dummy.next;
    }

    @Test
    void test1() {
        ListNode listNode = removeNthFromEnd(newListNode(1, 2, 3, 4, 5), 2);
        assertEquals("[1,2,3,5]", print(listNode));
    }

    @Test
    void test2() {
        ListNode listNode = removeNthFromEnd(newListNode(1), 1);
        assertEquals("[]", print(listNode));
    }

    @Test
    void test3() {
        ListNode listNode = removeNthFromEnd(newListNode(1, 2), 1);
        assertEquals("[1]", print(listNode));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_160_intersection_of_two_linked_lists"><a class="anchor" href="#_160_intersection_of_two_linked_lists"></a>160. Intersection of Two Linked Lists</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import leetcode.bean.ListNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.ListNode.newListNode;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 160. Intersection of Two Linked Lists
 *
 * @link https://leetcode.com/problems/intersection-of-two-linked-lists/
 * @author zhanglei
 * @date 2022/2/23
 */
class P0160 {

    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        ListNode curA = headA;
        ListNode curB = headB;
        while (curA != curB) {
            if (curA == null) {
                curA = headB;
            } else {
                curA = curA.next;
            }
            if (curB == null) {
                curB = headA;
            } else {
                curB = curB.next;
            }
        }
        return curA;
    }

    /*
    // not good
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        ListNode cur = headA;
        Set&lt;ListNode&gt; cache = new HashSet&lt;&gt;();
        while (cur != null) {
            cache.add(cur);
            cur = cur.next;
        }
        cur = headB;
        while (cur != null) {
            if (cache.contains(cur)) {
                return cur;
            }
            cur = cur.next;
        }
        return null;
    }
    */

    @Test
    void test1() {
        ListNode listNode = newListNode(8, 4, 5);
        assertEquals(
                listNode,
                getIntersectionNode(
                        new ListNode(4, new ListNode(1, listNode)),
                        new ListNode(5, new ListNode(6, new ListNode(1, listNode)))));
    }

    @Test
    void test2() {
        ListNode listNode = newListNode(2, 4);
        assertEquals(
                listNode,
                getIntersectionNode(
                        new ListNode(1, new ListNode(9, new ListNode(1, listNode))),
                        new ListNode(3, listNode)));
    }

    @Test
    void test3() {
        assertEquals(null, getIntersectionNode(newListNode(2, 6, 4), newListNode(1, 5)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_142_linked_list_cycle_ii"><a class="anchor" href="#_142_linked_list_cycle_ii"></a>142. Linked List Cycle II</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import leetcode.bean.ListNode;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNull;

/**
 * 142. Linked List Cycle II
 *
 * @link https://leetcode.com/problems/linked-list-cycle-ii/
 * @author zhanglei
 * @date 2021/9/30
 */
class P0142 {

    /**
     *
     *
     * &lt;pre&gt;
     *     v: slow speed
     *     t: time
     *     A: distance between head to the beginning of the cycle
     *     X: distance between meet point to the beginning of the cycle
     *     ∵ vt = A + nB + X
     *       2vt = A + (n+1)B + X
     *     ∴ vt = B
     *     ∴ X = (1-n)B - A &gt; 0
     *     ∴ meet point + A = the beginning of the cycle
     * &lt;/pre&gt;
     */
    public ListNode detectCycle(ListNode head) {
        ListNode slow = head;
        ListNode fast = head;
        while (fast != null &amp;&amp; fast.next != null) {
            slow = slow.next;
            fast = fast.next.next;
            if (slow == fast) {
                while (head != slow) {
                    head = head.next;
                    slow = slow.next;
                }
                return slow;
            }
        }
        return null;
    }

    @Test
    void test1() {
        ListNode node1 = new ListNode(3);
        ListNode node2 = new ListNode(2);
        ListNode node3 = new ListNode(0);
        ListNode node4 = new ListNode(-4);
        node1.next = node2;
        node2.next = node3;
        node3.next = node4;
        node4.next = node2;

        assertEquals(node2, detectCycle(node1));
    }

    @Test
    void test2() {
        ListNode node1 = new ListNode(1);
        ListNode node2 = new ListNode(2);
        node1.next = node2;
        node2.next = node1;

        assertEquals(node1, detectCycle(node1));
    }

    @Test
    void test3() {
        ListNode node1 = new ListNode(1);

        assertNull(detectCycle(node1));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_242_valid_anagram"><a class="anchor" href="#_242_valid_anagram"></a>242. Valid Anagram</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 242. Valid Anagram
 *
 * @link https://leetcode.com/problems/valid-anagram/
 * @author zhanglei
 * @date 2022/2/23
 */
class P0242 {

    public boolean isAnagram(String s, String t) {
        int[] hash = new int[26];
        for (int i = 0; i &lt; s.length(); i++) {
            hash[s.charAt(i) - 'a']++;
        }
        for (int i = 0; i &lt; t.length(); i++) {
            hash[t.charAt(i) - 'a']--;
        }
        for (int i : hash) {
            if (i != 0) {
                return false;
            }
        }
        return true;
    }

    /*
    // not good
    public boolean isAnagram(String s, String t) {
        if (s.length() != t.length()) {
            return false;
        }
        Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;(26);
        for (int i = 0; i &lt; s.length(); i++) {
            add(map, s.charAt(i));
        }
        for (int i = 0; i &lt; t.length(); i++) {
            if (!remove(map, t.charAt(i))) {
                return false;
            }
        }
        return true;
    }

    static void add(Map&lt;Character, Integer&gt; map, char c) {
        if (map.containsKey(c)) {
            map.put(c, map.get(c) + 1);
        } else {
            map.put(c, 1);
        }
    }

    static boolean remove(Map&lt;Character, Integer&gt; map, char c) {
        if (map.containsKey(c)) {
            Integer num = map.get(c);
            if (num == 1) {
                map.remove(c);
            } else {
                map.put(c, num - 1);
            }
            return true;
        } else {
            return false;
        }
    }
    */

    @Test
    void test1() {
        assertTrue(isAnagram("anagram", "nagaram"));
    }

    @Test
    void test2() {
        assertFalse(isAnagram("rat", "car"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_1002_find_common_characters"><a class="anchor" href="#_1002_find_common_characters"></a>1002. Find Common Characters</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p10;

import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 1002. Find Common Characters
 *
 * @link https://leetcode.com/problems/find-common-characters/
 * @author zhanglei
 * @date 2022/2/23
 */
class P1002 {
    public List&lt;String&gt; commonChars(String[] words) {
        int[] hash = new int[26];
        for (int j = 0; j &lt; words[0].length(); j++) {
            hash[words[0].charAt(j) - 'a']++;
        }
        for (int i = 1; i &lt; words.length; i++) {
            String word = words[i];
            int[] hash2 = new int[26];
            for (int j = 0; j &lt; word.length(); j++) {
                hash2[word.charAt(j) - 'a']++;
            }
            for (int k = 0; k &lt; 26; k++) {
                hash[k] = Math.min(hash[k], hash2[k]);
            }
        }
        List&lt;String&gt; result = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; hash.length; i++) {
            while (hash[i]-- &gt; 0) {
                result.add(String.valueOf((char) ('a' + i)));
            }
        }
        return result;
    }

    @Test
    void test1() {
        String[] words = {"bella", "label", "roller"};
        assertEquals(Arrays.asList("e", "l", "l").toString(), commonChars(words).toString());
    }

    @Test
    void test2() {
        String[] words = {"cool", "lock", "cook"};
        assertEquals(Arrays.asList("c", "o").toString(), commonChars(words).toString());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_349_intersection_of_two_arrays"><a class="anchor" href="#_349_intersection_of_two_arrays"></a>349. Intersection of Two Arrays</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p03;

import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.Set;
import java.util.stream.Collectors;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 349. Intersection of Two Arrays
 *
 * @link https://leetcode.com/problems/intersection-of-two-arrays/
 * @author zhanglei
 * @date 2022/2/23
 */
class P0349 {

    public int[] intersection(int[] nums1, int[] nums2) {
        Set&lt;Integer&gt; set = Arrays.stream(nums2).boxed().collect(Collectors.toSet());
        return Arrays.stream(nums1).distinct().filter(set::contains).toArray();
    }

    /*
    public int[] intersection(int[] nums1, int[] nums2) {
        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();
        Set&lt;Integer&gt; result = new HashSet&lt;&gt;();
        for (int i : nums1) {
            set.add(i);
        }
        for (int i : nums2) {
            if (set.contains(i)) {
                result.add(i);
            }
        }
        return result.stream().mapToInt(i -&gt; (int) i).toArray();
    }
    */

    @Test
    void test1() {
        int[] nums1 = {1, 2, 2, 1}, nums2 = {2, 2};
        assertEquals("[2]", Arrays.toString(intersection(nums1, nums2)));
    }

    @Test
    void test2() {
        int[] nums1 = {4, 9, 5}, nums2 = {9, 4, 9, 8, 4};
        assertEquals(
                "[4, 9]",
                Arrays.toString(Arrays.stream(intersection(nums1, nums2)).sorted().toArray()));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_202_happy_number"><a class="anchor" href="#_202_happy_number"></a>202. Happy Number</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import java.util.HashSet;
import java.util.Set;
import java.util.stream.Stream;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 202. Happy Number
 *
 * @link https://leetcode.com/problems/happy-number/
 * @author zhanglei
 * @date 2022/2/23
 */
@Slf4j
class P0202 {
    public boolean isHappy(int n) {
        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();
        while (set.add(n)) {
            n =
                    Stream.of(n)
                            .flatMap(
                                    i -&gt; {
                                        Stream.Builder&lt;Integer&gt; builder = Stream.builder();
                                        while (i &gt;= 10) {
                                            builder.add(i % 10);
                                            i /= 10;
                                        }
                                        builder.add(i);
                                        return builder.build();
                                    })
                            .mapToInt(i -&gt; i * i)
                            .sum();
        }

        return n == 1;
    }

    @Test
    void test1() {
        assertTrue(isHappy(19));
    }

    @Test
    void test2() {
        assertFalse(isHappy(2));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_1_two_sum"><a class="anchor" href="#_1_two_sum"></a>1. Two Sum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 1. Two Sum
 *
 * @link https://leetcode.com/problems/two-sum/
 * @author zhanglei
 * @date 2021/5/17
 */
class P0001 {

    int[] twoSum(int[] nums, int target) {
        Map&lt;Integer, Integer&gt; temps = new HashMap&lt;&gt;();
        for (int i = 0; i &lt; nums.length; i++) {
            if (temps.containsKey(nums[i])) {
                return new int[] {temps.get(nums[i]), i};
            }
            temps.put(target - nums[i], i);
        }
        return null;
    }

    /*
    // not good
    int[] twoSum(int[] nums, int target) {
        int[] temps = new int[nums.length];
        for (int i = 0; i &lt; nums.length; i++) {
            for (int j = 0; j &lt; i; j++) {
                if (temps[j] == nums[i]) {
                    return new int[] {j, i};
                }
            }
            temps[i] = target - nums[i];
        }
        return null;
    }
    */

    @Test
    void test1() {
        assertEquals("[0, 1]", Arrays.toString(twoSum(new int[] {2, 7, 11, 15}, 9)));
    }

    @Test
    void test2() {
        assertEquals("[1, 2]", Arrays.toString(twoSum(new int[] {3, 2, 4}, 6)));
    }

    @Test
    void test3() {
        assertEquals("[0, 1]", Arrays.toString(twoSum(new int[] {3, 3}, 6)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_454_4sum_ii"><a class="anchor" href="#_454_4sum_ii"></a>454. 4Sum II</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p04;

import org.junit.jupiter.api.Test;

import java.util.HashMap;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 454. 4Sum II
 *
 * @link https://leetcode.com/problems/4sum-ii/
 * @author zhanglei
 * @date 2022/2/24
 */
class P0454 {
    public int fourSumCount(int[] nums1, int[] nums2, int[] nums3, int[] nums4) {
        Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();
        for (int i = 0; i &lt; nums1.length; i++) {
            for (int j = 0; j &lt; nums2.length; j++) {
                map.put(nums1[i] + nums2[j], map.getOrDefault(nums1[i] + nums2[j], 0) + 1);
            }
        }
        int count = 0;
        for (int i = 0; i &lt; nums3.length; i++) {
            for (int j = 0; j &lt; nums4.length; j++) {
                count += map.getOrDefault(-nums3[i] - nums4[j], 0);
            }
        }
        return count;
    }

    @Test
    void test1() {
        int[] nums1 = {1, 2};
        int[] nums2 = {-2, -1};
        int[] nums3 = {-1, 2};
        int[] nums4 = {0, 2};
        assertEquals(2, fourSumCount(nums1, nums2, nums3, nums4));
    }

    @Test
    void test2() {
        int[] nums1 = {0};
        int[] nums2 = {0};
        int[] nums3 = {0};
        int[] nums4 = {0};
        assertEquals(1, fourSumCount(nums1, nums2, nums3, nums4));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_383_ransom_note"><a class="anchor" href="#_383_ransom_note"></a>383. Ransom Note</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p03;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 383. Ransom Note
 *
 * @link https://leetcode.com/problems/ransom-note/
 * @author zhanglei
 * @date 2022/2/24
 */
public class P0383 {
    public boolean canConstruct(String ransomNote, String magazine) {
        int[] hash = new int[26];
        for (int i = 0; i &lt; magazine.length(); i++) {
            hash[magazine.charAt(i) - 'a']++;
        }
        for (int i = 0; i &lt; ransomNote.length(); i++) {
            if (hash[ransomNote.charAt(i) - 'a']-- == 0) {
                return false;
            }
        }
        return true;
    }

    @Test
    void test1() {
        assertFalse(canConstruct("a", "b"));
    }

    @Test
    void test2() {
        assertFalse(canConstruct("aa", "ab"));
    }

    @Test
    void test3() {
        assertTrue(canConstruct("aa", "aab"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_15_3sum"><a class="anchor" href="#_15_3sum"></a>15. 3Sum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 15. 3Sum
 *
 * @link https://leetcode.com/problems/3sum/
 * @author zhanglei
 * @date 2022/2/24
 */
@Slf4j
class P0015 {
    public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) {
        Arrays.sort(nums);
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; nums.length - 2; i++) {
            if (i &gt; 0 &amp;&amp; nums[i] == nums[i - 1]) {
                continue;
            }
            int low = i + 1;
            int high = nums.length - 1;
            while (low &lt; high) {
                if (nums[i] + nums[low] + nums[high] == 0) {
                    result.add(Arrays.asList(nums[i], nums[low], nums[high]));
                    while (nums[low++] == nums[low] &amp;&amp; low &lt; high) {}
                    while (nums[high--] == nums[high] &amp;&amp; low &lt; high) {}
                } else if (nums[i] + nums[low] + nums[high] &lt; 0) {
                    while (nums[low++] == nums[low] &amp;&amp; low &lt; high) {}
                } else {
                    while (nums[high--] == nums[high] &amp;&amp; low &lt; high) {}
                }
            }
        }
        return result;
    }

    @Test
    void test1() {
        int[] nums = {-1, 0, 1, 2, -1, -4};
        assertEquals("[[-1, -1, 2], [-1, 0, 1]]", threeSum(nums).toString());
    }

    @Test
    void test2() {
        int[] nums = {};
        assertEquals("[]", threeSum(nums).toString());
    }

    @Test
    void test3() {
        int[] nums = {0};
        assertEquals("[]", threeSum(nums).toString());
    }

    @Test
    void test4() {
        int[] nums = {-2, 0, 1, 1, 2};
        assertEquals("[[-2, 0, 2], [-2, 1, 1]]", threeSum(nums).toString());
    }

    @Test
    void test5() {
        int[] nums = {0, 0, 0, 0, 0};
        assertEquals("[[0, 0, 0]]", threeSum(nums).toString());
    }

    @Test
    void test6() {
        int[] nums = {-2, 0, 0, 2, 2};
        assertEquals("[[-2, 0, 2]]", threeSum(nums).toString());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_18_4sum"><a class="anchor" href="#_18_4sum"></a>18. 4Sum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 18. 4Sum
 *
 * @link https://leetcode.com/problems/4sum/
 * @author zhanglei
 * @date 2022/2/24
 */
@Slf4j
class P0018 {

    // recursive solution
    public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums, int target) {
        Arrays.sort(nums);
        log.info("nums = {}", Arrays.toString(nums));
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        fourSum(nums, target, 0, 4, new ArrayList&lt;&gt;(), result);
        return result;
    }

    void fourSum(
            int[] nums,
            int target,
            int start,
            int n,
            List&lt;Integer&gt; temp,
            List&lt;List&lt;Integer&gt;&gt; result) {
        if (n &gt; nums.length) {
            return;
        }

        if (n == 2) {
            int low = start;
            int high = nums.length - 1;
            while (low &lt; high) {
                if (nums[low] + nums[high] == target) {
                    List&lt;Integer&gt; r = new ArrayList&lt;&gt;(temp);
                    r.add(nums[low]);
                    r.add(nums[high]);
                    result.add(r);
                    while (nums[high] == nums[high - 1] &amp;&amp; low &lt; high) {
                        high--;
                    }
                    high--;
                    while (nums[low] == nums[low + 1] &amp;&amp; low &lt; high) {
                        low++;
                    }
                    low++;
                } else if (nums[low] + nums[high] &lt; target) {
                    low++;
                } else {
                    high--;
                }
            }
        } else {
            for (int i = start; i &lt; nums.length - n + 1; i++) {
                if (i &gt; start &amp;&amp; nums[i] == nums[i - 1]) {
                    continue;
                }
                List&lt;Integer&gt; t = new ArrayList&lt;&gt;(temp);
                t.add(nums[i]);
                fourSum(nums, target - nums[i], i + 1, n - 1, t, result);
            }
        }
    }

    /*
    // iterative solution
    public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums, int target) {
        Arrays.sort(nums);
        log.info("{}", Arrays.toString(nums));
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt;= nums.length - 4; i++) {
            if (i &gt; 0 &amp;&amp; nums[i] == nums[i - 1]) {
                continue;
            }
            for (int j = nums.length - 1; j &gt;= 3; j--) {
                if (j &lt; nums.length - 1 &amp;&amp; nums[j] == nums[j + 1]) {
                    continue;
                }
                int low = i + 1;
                int high = j - 1;

                while (low &lt; high) {
                    if (nums[i] + nums[low] + nums[high] + nums[j] == target) {

                        result.add(Arrays.asList(nums[i], nums[low], nums[high], nums[j]));
                        while (nums[high] == nums[high - 1] &amp;&amp; low &lt; high) {
                            high--;
                        }
                        high--;
                        while (nums[low] == nums[low + 1] &amp;&amp; low &lt; high) {
                            low++;
                        }
                        low++;
                    } else if (nums[i] + nums[low] + nums[high] + nums[j] &gt; target) {
                        while (nums[high] == nums[high - 1] &amp;&amp; low &lt; high) {
                            high--;
                        }
                        high--;
                    } else {
                        while (nums[low] == nums[low + 1] &amp;&amp; low &lt; high) {
                            low++;
                        }
                        low++;
                    }
                }
            }
        }
        return result;
    }
    */

    @Test
    void test1() {
        int[] nums = {1, 0, -1, 0, -2, 2};
        assertEquals("[[-2, -1, 1, 2], [-2, 0, 0, 2], [-1, 0, 0, 1]]", fourSum(nums, 0).toString());
    }

    @Test
    void test2() {
        int[] nums = {2, 2, 2, 2, 2};
        assertEquals("[[2, 2, 2, 2]]", fourSum(nums, 8).toString());
    }

    @Test
    void test3() {
        int[] nums = {-3, -1, 0, 2, 4, 5};
        assertEquals("[[-3, -1, 0, 4]]", fourSum(nums, 0).toString());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_344_reverse_string"><a class="anchor" href="#_344_reverse_string"></a>344. Reverse String</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p03;

import org.junit.jupiter.api.Test;

import java.util.Arrays;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 344. Reverse String
 *
 * @link https://leetcode.com/problems/reverse-string/
 * @author zhanglei
 * @date 2022/2/25
 */
class P0344 {
    public void reverseString(char[] s) {
        for (int i = 0, j = s.length - 1; i &lt;= j; i++, j--) {
            char t = s[i];
            s[i] = s[j];
            s[j] = t;
        }
    }

    @Test
    void test1() {
        char[] s = {'h', 'e', 'l', 'l', 'o'};
        reverseString(s);
        assertEquals("[o, l, l, e, h]", Arrays.toString(s));
    }

    @Test
    void test2() {
        char[] s = {'H', 'a', 'n', 'n', 'a', 'h'};
        reverseString(s);
        assertEquals("[h, a, n, n, a, H]", Arrays.toString(s));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_541_reverse_string_ii"><a class="anchor" href="#_541_reverse_string_ii"></a>541. Reverse String II</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p05;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 541. Reverse String II
 *
 * @link https://leetcode.com/problems/reverse-string-ii/
 * @author zhanglei
 * @date 2022/2/25
 */
class P0541 {
    public String reverseStr(String s, int k) {
        char[] str = s.toCharArray();
        for (int i = 0; i &lt; str.length; i += 2 * k) {
            for (int low = i, high = Math.min(i + k - 1, str.length - 1);
                    low &lt;= high;
                    low++, high--) {
                char t = str[low];
                str[low] = str[high];
                str[high] = t;
            }
        }
        return new String(str);
    }

    @Test
    void test1() {
        assertEquals("bacdfeg", reverseStr("abcdefg", 2));
    }

    @Test
    void test2() {
        assertEquals("bacd", reverseStr("abcd", 2));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2239_剑指_offer_05_替换空格"><a class="anchor" href="#_2239_剑指_offer_05_替换空格"></a>2239. 剑指 Offer 05. 替换空格</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p22;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 剑指 Offer 05. 替换空格
 *
 * @link https://leetcode-cn.com/problems/ti-huan-kong-ge-lcof/
 * @author zhanglei
 * @date 2022/2/25
 */
class P2239 {

    /*
    public String replaceSpace(String s) {
        return s.replace(" ", "%20");
    }
    */

    public String replaceSpace(String s) {
        StringBuilder sb = new StringBuilder();
        char[] chars = s.toCharArray();
        for (char c : chars) {
            if (c == ' ') {
                sb.append("%20");
            } else {
                sb.append(c);
            }
        }
        return sb.toString();
    }

    @Test
    void test1() {
        assertEquals("We%20are%20happy.", replaceSpace("We are happy."));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_151_reverse_words_in_a_string"><a class="anchor" href="#_151_reverse_words_in_a_string"></a>151. Reverse Words in a String</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 151. Reverse Words in a String
 *
 * @link https://leetcode.com/problems/reverse-words-in-a-string/
 * @author zhanglei
 * @date 2022/2/25
 */
class P0151 {

    /*
    public String reverseWords(String s) {
        String[] words = s.trim().split("\\s+");
        for (int i = 0, j = words.length - 1; i &lt;= j; i++, j--) {
            String t = words[i];
            words[i] = words[j];
            words[j] = t;
        }
        return String.join(" ", words);
    }
    */

    public String reverseWords(String s) {
        char[] chars = s.toCharArray();

        // step 1. clean up spaces
        int l = 0;
        for (int i = 0; i &lt; chars.length; i++) {
            if (chars[i] == ' '
                    &amp;&amp; (l == 0 // first ?
                            || i == chars.length - 1 // last ?
                            || chars[i + 1] == ' ' // middle ?
                    )) {
                continue;
            }
            chars[l++] = chars[i];
        }

        // step 2. reverse the whole string
        reverse(chars, 0, l - 1);

        // step 3. reverse each word
        for (int s1 = 0; s1 &lt; l; s1++) {
            if (chars[s1] == ' ') {
                continue;
            }
            for (int s2 = s1; s2 &lt; l; s2++) {
                if (s2 + 1 &lt; l &amp;&amp; chars[s2 + 1] != ' ') {
                    continue;
                }
                reverse(chars, s1, s2);
                s1 = s2 + 1;
                break;
            }
        }

        return new String(chars, 0, l);
    }

    static void reverse(char[] chars, int low, int high) {
        for (int i = low, j = high; i &lt;= j; i++, j--) {
            char t = chars[i];
            chars[i] = chars[j];
            chars[j] = t;
        }
    }

    @Test
    void test1() {
        assertEquals("blue is sky the", reverseWords("the sky is blue"));
    }

    @Test
    void test2() {
        assertEquals("world hello", reverseWords("  hello world  "));
    }

    @Test
    void test3() {
        assertEquals("example good a", reverseWords("a good   example"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2297_剑指_offer_58_ii_左旋转字符串"><a class="anchor" href="#_2297_剑指_offer_58_ii_左旋转字符串"></a>2297. 剑指 Offer 58 - II. 左旋转字符串</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p22;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 剑指 Offer 58 - II. 左旋转字符串
 *
 * @link https://leetcode-cn.com/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/
 * @author zhanglei
 * @date 2022/2/25
 */
class P2297 {
    public String reverseLeftWords(String s, int n) {
        char[] chars = s.toCharArray();
        reverseWords(chars, 0, chars.length - 1);
        reverseWords(chars, 0, chars.length - n - 1);
        reverseWords(chars, chars.length - n, chars.length - 1);
        return new String(chars);
    }

    static void reverseWords(char[] chars, int low, int high) {
        for (int i = low, j = high; i &lt;= j; i++, j--) {
            char t = chars[i];
            chars[i] = chars[j];
            chars[j] = t;
        }
    }

    @Test
    void test1() {
        assertEquals("cdefgab", reverseLeftWords("abcdefg", 2));
    }

    @Test
    void test2() {
        assertEquals("umghlrlose", reverseLeftWords("lrloseumgh", 6));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_28_implement_strstr"><a class="anchor" href="#_28_implement_strstr"></a>28. Implement strStr()</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import org.junit.jupiter.api.Disabled;
import org.junit.jupiter.api.Test;

import java.util.Arrays;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 28. Implement strStr()
 *
 * @link https://leetcode.com/problems/implement-strstr/
 * @author zhanglei
 * @date 2022/2/25
 */
class P0028 {

    public int strStr(String haystack, String needle) {
        if (needle.length() == 0) {
            return 0;
        }
        int i = 0;
        int j = 0;
        int[] next = buildNext(needle);
        while (i &lt; haystack.length()) {
            if (haystack.charAt(i) == needle.charAt(j)) {
                i++;
                j++;
            } else if (j &gt; 0) {
                j = next[j - 1];
            } else {
                i++;
            }
            if (j == needle.length()) {
                return i - needle.length();
            }
        }
        return -1;
    }

    // \sigma(x) = max{k: P_k \sqsupset x}
    static int[] buildNext(String str) {
        int[] next = new int[str.length()];
        int i = 1;
        int j = 0;
        while (i &lt; str.length()) {
            if (str.charAt(i) == str.charAt(j)) {
                next[i] = j + 1;
                i++;
                j++;
            } else if (j &gt; 0) {
                j = next[j - 1];
            } else {
                i++;
            }
        }
        return next;
    }

    @Test
    @Disabled
    void testBuildNext() {
        assertEquals("[0, 0, 0, 1, 2, 0]", Arrays.toString(buildNext("abcabd")));
    }

    /*
    public int strStr(String haystack, String needle) {
        return haystack.indexOf(needle);
    }
    */

    /*
    // native string matcher
    // O((n-m)m)
    public int strStr(String haystack, String needle) {
        if (needle == null || needle.length() == 0) {
            return 0;
        }
        for (int i = 0; i &lt; haystack.length() - needle.length() + 1; i++) {
            for (int j = 0; j &lt; needle.length(); j++) {
                if (haystack.charAt(j + i) != needle.charAt(j)) {
                    break;
                }
                if (j == needle.length() - 1) {
                    return i;
                }
            }
        }
        return -1;
    }
    */

    @Test
    void test1() {
        assertEquals(2, strStr("hello", "ll"));
    }

    @Test
    void test2() {
        assertEquals(-1, strStr("aaaaa", "bba"));
    }

    @Test
    void test3() {
        assertEquals(0, strStr("", ""));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_459_repeated_substring_pattern"><a class="anchor" href="#_459_repeated_substring_pattern"></a>459. Repeated Substring Pattern</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p04;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 459. Repeated Substring Pattern
 *
 * @link https://leetcode.com/problems/repeated-substring-pattern/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0459 {
    public boolean repeatedSubstringPattern(String s) {
        int[] next = new int[s.length()];
        int i = 1;
        int j = 0;
        while (i &lt; s.length()) {
            if (s.charAt(i) == s.charAt(j)) {
                next[i] = j + 1;
                i++;
                j++;
            } else if (j &gt; 0) {
                j = next[j - 1];
            } else {
                i++;
            }
        }
        return next[s.length() - 1] &gt; 0 &amp;&amp; s.length() % (s.length() - next[s.length() - 1]) == 0;
    }

    @Test
    void test1() {
        assertTrue(repeatedSubstringPattern("abab"));
    }

    @Test
    void test2() {
        assertFalse(repeatedSubstringPattern("aba"));
    }

    @Test
    void test3() {
        assertTrue(repeatedSubstringPattern("abcabcabcabc"));
    }

    @Test
    void test4() {
        repeatedSubstringPattern("aabaaba");
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_232_implement_queue_using_stacks"><a class="anchor" href="#_232_implement_queue_using_stacks"></a>232. Implement Queue using Stacks</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import org.junit.jupiter.api.Test;

import java.util.Stack;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;

/**
 * 232. Implement Queue using Stacks
 *
 * @link https://leetcode.com/problems/implement-queue-using-stacks/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0232 {
    static class MyQueue {

        Stack&lt;Integer&gt; pushStack;
        Stack&lt;Integer&gt; popStack;

        public MyQueue() {
            pushStack = new Stack&lt;&gt;();
            popStack = new Stack&lt;&gt;();
        }

        void transToPushStack() {
            while (!popStack.empty()) {
                pushStack.push(popStack.pop());
            }
        }

        void transToPopStack() {
            while (!pushStack.empty()) {
                popStack.push(pushStack.pop());
            }
        }

        public void push(int x) {
            transToPushStack();
            pushStack.push(x);
        }

        public int pop() {
            transToPopStack();
            return popStack.pop();
        }

        public int peek() {
            transToPopStack();
            return popStack.peek();
        }

        public boolean empty() {
            return popStack.empty() &amp;&amp; pushStack.empty();
        }
    }

    @Test
    void test1() {
        MyQueue myQueue = new MyQueue();
        myQueue.push(1); // queue is: [1]
        myQueue.push(2); // queue is: [1, 2] (leftmost is front of the queue)
        assertEquals(1, myQueue.peek()); // return 1
        assertEquals(1, myQueue.pop()); // return 1, queue is [2]
        assertFalse(myQueue.empty()); // return false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_225_implement_stack_using_queues"><a class="anchor" href="#_225_implement_stack_using_queues"></a>225. Implement Stack using Queues</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import org.junit.jupiter.api.Test;

import java.util.ArrayDeque;
import java.util.Queue;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;

/**
 * 225. Implement Stack using Queues
 *
 * @link https://leetcode.com/problems/implement-stack-using-queues/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0225 {
    static class MyStack {

        Queue&lt;Integer&gt; queue;
        Queue&lt;Integer&gt; tempQueue;

        public MyStack() {
            queue = new ArrayDeque&lt;&gt;();
            tempQueue = new ArrayDeque&lt;&gt;();
        }

        public void push(int x) {
            queue.add(x);
        }

        public int pop() {
            while (queue.size() &gt; 1) {
                tempQueue.offer(queue.poll());
            }
            int result = queue.poll();
            Queue&lt;Integer&gt; t = queue;
            queue = tempQueue;
            tempQueue = t;
            return result;
        }

        public int top() {
            while (queue.size() &gt; 1) {
                tempQueue.offer(queue.poll());
            }
            int result = queue.poll();
            tempQueue.offer(result);
            Queue&lt;Integer&gt; t = queue;
            queue = tempQueue;
            tempQueue = t;
            return result;
        }

        public boolean empty() {
            return queue.isEmpty();
        }
    }

    @Test
    void test1() {
        MyStack myStack = new MyStack();
        myStack.push(1);
        myStack.push(2);
        assertEquals(2, myStack.top()); // return 2
        assertEquals(2, myStack.pop()); // return 2
        assertFalse(myStack.empty()); // return False
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_20_valid_parentheses"><a class="anchor" href="#_20_valid_parentheses"></a>20. Valid Parentheses</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import org.junit.jupiter.api.Test;

import java.util.Stack;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 20. Valid Parentheses
 *
 * @link https://leetcode.com/problems/valid-parentheses/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0020 {
    public boolean isValid(String s) {
        Stack&lt;Character&gt; stack = new Stack&lt;&gt;();
        for (int i = 0; i &lt; s.length(); i++) {
            char c = s.charAt(i);
            if (stack.empty() || !stack.peek().equals(c)) {
                Character closedBrackets = getClosedBrackets(c);
                if (closedBrackets != null) {
                    stack.push(closedBrackets);
                } else {
                    return false;
                }
            } else {
                stack.pop();
            }
        }
        return stack.empty();
    }

    static Character getClosedBrackets(Character character) {
        switch (character) {
            case '(':
                return ')';
            case '[':
                return ']';
            case '{':
                return '}';
        }
        return null;
    }

    @Test
    void test1() {
        assertTrue(isValid("()"));
    }

    @Test
    void test2() {
        assertTrue(isValid("()[]{}"));
    }

    @Test
    void test3() {
        assertFalse(isValid("(]"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_1047_remove_all_adjacent_duplicates_in_string"><a class="anchor" href="#_1047_remove_all_adjacent_duplicates_in_string"></a>1047. Remove All Adjacent Duplicates In String</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p10;

import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 1047. Remove All Adjacent Duplicates In String
 *
 * @link https://leetcode.com/problems/remove-all-adjacent-duplicates-in-string/
 * @author zhanglei
 * @date 2022/3/2
 */
class P1047 {
    public String removeDuplicates(String s) {
        char[] n = new char[s.length()];
        int nLength = 0;
        for (int i = 0; i &lt; s.length(); i++) {
            char c = s.charAt(i);
            if (nLength == 0 || n[nLength - 1] != c) {
                n[nLength++] = c;
            } else {
                nLength--;
            }
        }
        return new String(n, 0, nLength);
    }

    @Test
    void test1() {
        assertEquals("ca", removeDuplicates("abbaca"));
    }

    @Test
    void test2() {
        assertEquals("ay", removeDuplicates("azxxzy"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_150_evaluate_reverse_polish_notation"><a class="anchor" href="#_150_evaluate_reverse_polish_notation"></a>150. Evaluate Reverse Polish Notation</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import org.junit.jupiter.api.Test;

import java.util.Stack;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 150. Evaluate Reverse Polish Notation
 *
 * @link https://leetcode.com/problems/evaluate-reverse-polish-notation/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0150 {
    public int evalRPN(String[] tokens) {
        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();
        for (String token : tokens) {
            switch (token) {
                case "+":
                    stack.push(stack.pop() + stack.pop());
                    break;
                case "-":
                    Integer subtrahend = stack.pop();
                    stack.push(stack.pop() - subtrahend);
                    break;
                case "*":
                    stack.push(stack.pop() * stack.pop());
                    break;
                case "/":
                    Integer divisor = stack.pop();
                    stack.push(stack.pop() / divisor);
                    break;
                default:
                    stack.push(Integer.valueOf(token));
            }
        }
        return stack.peek();
    }

    @Test
    void test1() {
        String[] tokens = {"2", "1", "+", "3", "*"};
        assertEquals(9, evalRPN(tokens));
    }

    @Test
    void test2() {
        String[] tokens = {"4", "13", "5", "/", "+"};
        assertEquals(6, evalRPN(tokens));
    }

    @Test
    void test3() {
        String[] tokens = {"10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"};
        assertEquals(22, evalRPN(tokens));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_239_sliding_window_maximum"><a class="anchor" href="#_239_sliding_window_maximum"></a>239. Sliding Window Maximum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import org.junit.jupiter.api.Test;

import java.util.ArrayDeque;
import java.util.Arrays;
import java.util.Deque;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 239. Sliding Window Maximum
 *
 * @link https://leetcode.com/problems/sliding-window-maximum/
 * @author zhanglei
 * @date 2022/3/2
 */
class P0239 {

    public int[] maxSlidingWindow(int[] nums, int k) {
        Deque&lt;Integer&gt; window = new ArrayDeque&lt;&gt;(k);
        int[] result = new int[nums.length - k + 1];
        for (int i = 0; i &lt; nums.length; i++) {
            if (i &lt; k - 1) {
                addToWindow(window, nums[i]);
                continue;
            }
            addToWindow(window, nums[i]);
            result[i - k + 1] = window.peekFirst();
            if (i &gt;= k - 1) {
                removeWindow(window, nums[i - k + 1]);
            }
        }
        return result;
    }

    static void addToWindow(Deque&lt;Integer&gt; window, int num) {
        while (!window.isEmpty() &amp;&amp; window.peekLast() &lt; num) {
            window.pollLast();
        }
        window.offer(num);
    }

    static void removeWindow(Deque&lt;Integer&gt; window, int num) {
        if (!window.isEmpty() &amp;&amp; window.peekFirst() == num) {
            window.pollFirst();
        }
    }

    /*
    // Time Limit Exceeded
    public int[] maxSlidingWindow(int[] nums, int k) {
        int[] window = new int[k];
        int[] result = new int[nums.length - k + 1];
        for (int i = 0; i &lt; nums.length; i++) {
            if (i &lt; k) {
                window[i] = nums[i];
                if (i == k - 1) {
                    Arrays.sort(window);
                    result[i - k + 1] = window[k - 1];
                }
                continue;
            }
            adjust(window, nums[i - k], nums[i]);
            result[i - k + 1] = window[k - 1];
        }
        return result;
    }

    static void adjust(int[] window, int del, int add) {
        for (int i = 0, j = window.length - 1; i &lt;= j; ) {
            int mid = i + j &gt;&gt;&gt; 1;
            if (window[mid] == del) {
                window[mid] = add;
                Arrays.sort(window);
                return;
            } else if (window[mid] &gt; del) {
                j = mid - 1;
            } else {
                i = mid + 1;
            }
        }
    }
    */

    @Test
    void test1() {
        int[] nums = {1, 3, -1, -3, 5, 3, 6, 7};
        assertEquals("[3, 3, 5, 5, 6, 7]", Arrays.toString(maxSlidingWindow(nums, 3)));
    }

    @Test
    void test2() {
        int[] nums = {1};
        assertEquals("[1]", Arrays.toString(maxSlidingWindow(nums, 1)));
    }

    @Test
    void test28() {
        int[] nums = {7, 2, 4};
        assertEquals("[7, 4]", Arrays.toString(maxSlidingWindow(nums, 2)));
    }

    @Test
    void test29() {
        int[] nums = {1, 3, 1, 2, 0, 5};
        assertEquals("[3, 3, 2, 5]", Arrays.toString(maxSlidingWindow(nums, 3)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_347_top_k_frequent_elements"><a class="anchor" href="#_347_top_k_frequent_elements"></a>347. Top K Frequent Elements</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p03;

import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.PriorityQueue;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 347. Top K Frequent Elements
 *
 * @link https://leetcode.com/problems/top-k-frequent-elements/
 * @author zhanglei
 * @date 2022/3/3
 */
class P0347 {
    public int[] topKFrequent(int[] nums, int k) {
        Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();
        for (int i = 0; i &lt; nums.length; i++) {
            map.put(nums[i], map.getOrDefault(nums[i], 0) + 1);
        }
        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; queue =
                new PriorityQueue&lt;&gt;(k, Map.Entry.comparingByValue());
        for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) {
            if (queue.size() != k || queue.peek().getValue() &lt; entry.getValue()) {
                if (queue.size() == k) {
                    queue.poll();
                }
                queue.offer(entry);
            }
        }
        int[] result = new int[k];
        for (int i = k - 1; i &gt;= 0; i--) {
            result[i] = queue.poll().getKey();
        }
        return result;
    }

    @Test
    void test1() {
        int[] nums = {1, 1, 1, 2, 2, 3};
        assertEquals("[1, 2]", Arrays.toString(topKFrequent(nums, 2)));
    }

    @Test
    void test2() {
        int[] nums = {1};
        assertEquals("[1]", Arrays.toString(topKFrequent(nums, 1)));
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_review"><a class="anchor" href="#_review"></a>Review</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_netflix_builds_a_reliable_scalable_platform_with_event_sourcing_mqtt_and_alpakka_kafka"><a class="anchor" href="#_netflix_builds_a_reliable_scalable_platform_with_event_sourcing_mqtt_and_alpakka_kafka"></a><a href="https://www.infoq.com/news/2021/08/netflix-device-management/">Netflix Builds a Reliable, Scalable Platform with Event Sourcing, MQTT and Alpakka-Kafka</a></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>since device updates published on MQTT contain the device_session_id in the topic, all device information updates for a given device session will effectively appear on the same Kafka partition, thus giving us a well-defined message order for consumption.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>In Kafka, order can only be guaranteed within a partition, and the key is used for partitioning.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Alpakka-Kafka provides Spring Boot integration together with "fine-grained control over stream processing, including automatic back-pressure support and streams supervision."</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Unlike KafkaListener, Alpakka-Kafka doesn&#8217;t under-consume or over-consume Kafka messages.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_processing_guarantees_in_kafka"><a class="anchor" href="#_processing_guarantees_in_kafka"></a><a href="https://medium.com/@andy.bryant/processing-guarantees-in-kafka-12dd2e30be0e">Processing guarantees in Kafka</a></h3>
<div class="sect3">
<h4 id="_identify_duplicates"><a class="anchor" href="#_identify_duplicates"></a>identify duplicates</h4>
<div class="sect4">
<h5 id="_using_a_key"><a class="anchor" href="#_using_a_key"></a>using a key</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If your data has an intrinsic business key that uniquely identifies a record, this can be a good candidate for deduplication. If no such key exists, a hash of the contents can also be used.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>drawback:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Using a key for deduplication does work well, but comes at the cost of additional latency and the ongoing cost of managing the state store.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_sequence"><a class="anchor" href="#_using_a_sequence"></a>using a sequence</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In some cases a lighter weight approach works if the source stream has some form of sequence number attached to each message whose value increases with each message.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For any new message, if the key is less than or equal to the previously stored value, it is considered a duplicate and dropped. Otherwise the value is forwarded on and the state store is updated.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_datastore"><a class="anchor" href="#_using_a_datastore"></a>using a datastore</h5>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>To identify duplicate messages we first query the destination system for each message and drop any that are already there, inserting the remaining messages.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>drawback and optimisation:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>For datastores where querying existing records is slow, you can add an optimisation using a probabilistic matching such as a bloom or cuckoo filter.</p>
</div>
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tip"><a class="anchor" href="#_tip"></a>Tip</h2>
<div class="sectionbody">
<div class="paragraph">
<p>you can use arthas to modify logger level at run-time</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"># https://arthas.aliyun.com/doc/logger.html#logger-level
java -jar arthas-boot.jar

# specify the class loader
logger --classLoaderClass sun.misc.Launcher$AppClassLoader

# modify logger level
logger -n com.pohvii.note.service --level debug</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share"><a class="anchor" href="#_share"></a>Share</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_grokking_simplicity_taming_complex_software_with_functional_thinking"><a class="anchor" href="#_grokking_simplicity_taming_complex_software_with_functional_thinking"></a>Grokking simplicity: taming complex software with functional thinking</h3>
<div class="sect3">
<h4 id="_stratified_design_part_2"><a class="anchor" href="#_stratified_design_part_2"></a>Stratified design: Part 2</h4>
<div class="paragraph">
<p><span class="image"><img src="_images/which_code_has_high_benefit_of_testing.png" alt="which code has high benefit of testing"></span>
Code at the top changes more frequently than code at the bottom, testing code at bottom is more important.</p>
</div>
<div class="paragraph">
<p>The more functions on the path to the top of the graph, the more valuable its tests will be.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/function_call_two_levels.png" alt="function call two levels">
</div>
</div>
<div class="paragraph">
<p>It is more valuable to test B() than A() since more code relies on it, having two functions above it.</p>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
    <div class="footer-tools">
        <a href="#top" title="Reach the top of the page">Back to top</a>
    </div>
<script src="../../../_/js/vendor/algoliasearch-77ad57d83c.js"></script>
<script src="../../../_/js/site-ca1c0b0367.js"></script>
<script async src="../../../_/js/vendor/highlight-0a351063af.js"></script>
<script async src="../../../_/js/vendor/svg4everybody-195d47ce7d.js"></script>
              </body>
</html>

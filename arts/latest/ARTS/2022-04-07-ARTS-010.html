<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ARTS 010 :: Lei&#x27;s Notebook</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../../_/css/site-c40d8d4d09.css">
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="nav-logo" href="../../.."></a>
      <div id="topbar-nav" class="navbar-menu">
        <div class="navbar-end">
                <a class="navbar-item-section navbar-item navbar-topics" href="../../../arts/">
                  <img alt="ARTS" src="/_/img/blog-e21e601f33.svg">
                  ARTS
                </a>
        </div>
      </div>
      <div class="navbar-fill"></div>
      <div class="break-row"></div>
      <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<a id="top"></a>
<div class="body">
<div class="nav-container" data-component="arts" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active">
  <nav class="nav-menu" data-panel="menu">
    <h3 class="title"><a href="../index.html">ARTS</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">ARTS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2021</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-05-07-ARTS-001.html">ARTS 001</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-08-ARTS-002.html">ARTS 002</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-15-ARTS-003.html">ARTS 003</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-11-25-ARTS-004.html">ARTS 004</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2021-12-02-ARTS-005.html">ARTS 005</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Expand or contract topic"></button>
    <span class="nav-text">2022</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-03-ARTS-006.html">ARTS 006</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-07-ARTS-007.html">ARTS 007</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-14-ARTS-008.html">ARTS 008</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="2022-03-21-ARTS-009.html">ARTS 009</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="2022-04-07-ARTS-010.html">ARTS 010</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ARTS</span>
<span class="version">latest</span>  </div>
  <ul class="components">
    <li class="component is-current"><span class="title">ARTS</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">latest</a>
        </li>
      </ul></li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<nav class="toolbar">
<button class="nav-toggle" aria-label="Toggle submenu"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li>ARTS</li>
    <li>2022</li>
    <li><a href="2022-04-07-ARTS-010.html">ARTS 010</a></li>
  </ul>
</nav>
</nav>
  <div class="content">
<article class="doc">
<h1 class="page">ARTS 010</h1>
<div class="sect1">
<h2 id="_algorithm"><a class="anchor" href="#_algorithm"></a>Algorithm</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_617_merge_two_binary_trees"><a class="anchor" href="#_617_merge_two_binary_trees"></a>617. Merge Two Binary Trees</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p06;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.Deque;
import java.util.LinkedList;

import static leetcode.bean.TreeNode.newTreeNode;
import static leetcode.bean.TreeNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 617. Merge Two Binary Trees
 *
 * @link https://leetcode.com/problems/merge-two-binary-trees/
 * @author zhanglei
 * @date 2022/3/21
 */
class P0617 {

    // interactive solution
    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {
        if (root1 == null) {
            return root2;
        }
        if (root2 == null) {
            return root1;
        }
        Deque&lt;TreeNode&gt; deque = new LinkedList&lt;&gt;();
        deque.offer(root1);
        deque.offer(root2);
        while (!deque.isEmpty()) {
            TreeNode node1 = deque.poll();
            TreeNode node2 = deque.poll();
            node1.val += node2.val;

            if (node1.left == null) {
                node1.left = node2.left;
            } else if (node2.left != null) {
                deque.offer(node1.left);
                deque.offer(node2.left);
            }
            if (node1.right == null) {
                node1.right = node2.right;
            } else if (node2.right != null) {
                deque.offer(node1.right);
                deque.offer(node2.right);
            }
        }
        return root1;
    }

    /*
    // recursive solution
    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {
        if (root1 == null) {
            return root2;
        }
        if (root2 == null) {
            return root1;
        }
        TreeNode root = new TreeNode(root1.val + root2.val);
        root.left = mergeTrees(root1.left, root2.left);
        root.right = mergeTrees(root1.right, root2.right);
        return root;
    }
    */

    @Test
    void test1() {
        assertEquals(
                "[3,4,5,5,4,null,7]",
                print(mergeTrees(newTreeNode(1, 3, 2, 5), newTreeNode(2, 1, 3, null, 4, null, 7))));
    }

    @Test
    void test2() {
        assertEquals("[2,2]", print(mergeTrees(newTreeNode(1), newTreeNode(1, 2))));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_700_search_in_a_binary_search_tree"><a class="anchor" href="#_700_search_in_a_binary_search_tree"></a>700. Search in a Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p07;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import static leetcode.bean.TreeNode.newTreeNode;
import static leetcode.bean.TreeNode.print;

/**
 * 700. Search in a Binary Search Tree
 *
 * @author zhanglei
 * @date 2022/3/21
 */
class P0700 {

    // improved interactive solution
    public TreeNode searchBST(TreeNode root, int val) {
        while (root != null) {
            if (root.val == val) {
                return root;
            } else if (root.val &gt; val) {
                root = root.left;
            } else {
                root = root.right;
            }
        }
        return null;
    }

    /*
    // interactive solution
    public TreeNode searchBST(TreeNode root, int val) {
        if (root == null) {
            return null;
        }
        Deque&lt;TreeNode&gt; deque = new LinkedList&lt;&gt;();
        deque.offer(root);
        while (!deque.isEmpty()) {
            TreeNode node = deque.poll();
            if (node == null) {
                return null;
            }
            if (node.val == val) {
                return node;
            } else if (node.val &gt; val) {
                deque.push(node.left);
            } else {
                deque.push(node.right);
            }
        }
        return null;
    }
    */

    /*
    // recursive solution
    public TreeNode searchBST(TreeNode root, int val) {
        if (root == null) {
            return null;
        }
        if (root.val == val) {
            return root;
        } else if (root.val &gt; val) {
            return searchBST(root.left, val);
        } else {
            return searchBST(root.right, val);
        }
    }
    */

    @Test
    void test1() {
        Assertions.assertEquals("[2,1,3]", print(searchBST(newTreeNode(4, 2, 7, 1, 3), 2)));
    }

    @Test
    void test2() {
        Assertions.assertEquals("[]", print(searchBST(newTreeNode(4, 2, 7, 1, 3), 5)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_98_validate_binary_search_tree"><a class="anchor" href="#_98_validate_binary_search_tree"></a>98. Validate Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.ArrayDeque;
import java.util.Deque;

import static leetcode.bean.TreeNode.newTreeNode;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 98. Validate Binary Search Tree
 *
 * @link https://leetcode.com/problems/validate-binary-search-tree/
 * @author zhanglei
 * @date 2022/3/21
 */
class P0098 {

    // interactive solution
    // TODO improve inorder traversal
    public boolean isValidBST(TreeNode root) {
        if (root == null) {
            return true;
        }
        Deque&lt;Object&gt; deque = new ArrayDeque&lt;&gt;();
        deque.offerLast(root);
        Integer pre = null;
        while (!deque.isEmpty()) {
            if (deque.peekLast() instanceof TreeNode) {
                TreeNode node = (TreeNode) deque.pollLast();
                if (node.right != null) {
                    deque.offerLast(node.right);
                }
                deque.offerLast(node.val);
                if (node.left != null) {
                    deque.offerLast(node.left);
                }
            } else {
                if (pre != null) {
                    if (valOf(deque.peekLast()) &lt;= pre) {
                        return false;
                    }
                }
                pre = (Integer) deque.pollLast();
            }
        }
        return true;
    }

    static int valOf(Object obj) {
        if (obj instanceof TreeNode) {
            return ((TreeNode) obj).val;
        } else {
            return (Integer) obj;
        }
    }

    /*
    // recursive solution
    public boolean isValidBST(TreeNode root) {
        return root == null
                || (root.left == null || max(root.left) &lt; root.val &amp;&amp; isValidBST(root.left))
                        &amp;&amp; (root.right == null
                                || min(root.right) &gt; root.val &amp;&amp; isValidBST(root.right));
    }

    static int min(TreeNode root) {
        while (root.left != null) {
            root = root.left;
        }
        return root.val;
    }

    static int max(TreeNode root) {
        while (root.right != null) {
            root = root.right;
        }
        return root.val;
    }
    */

    @Test
    void test1() {
        assertTrue(isValidBST(newTreeNode(2, 1, 3)));
    }

    @Test
    void test2() {
        assertFalse(isValidBST(newTreeNode(5, 1, 4, null, null, 3, 6)));
    }

    @Test
    void test10() {
        assertTrue(isValidBST(newTreeNode(0, null, 1)));
    }

    @Test
    void test57() {
        assertFalse(isValidBST(newTreeNode(2, 2, 2)));
    }

    @Test
    void test61() {
        assertFalse(isValidBST(newTreeNode(1, 1)));
    }

    @Test
    void test72() {
        assertFalse(isValidBST(newTreeNode(5, 4, 6, null, null, 3, 7)));
    }

    @Test
    void test75() {
        assertFalse(isValidBST(newTreeNode(5, 4, 6, null, null, 3, 7)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_530_minimum_absolute_difference_in_bst"><a class="anchor" href="#_530_minimum_absolute_difference_in_bst"></a>530. Minimum Absolute Difference in BST</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p05;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.Deque;
import java.util.LinkedList;

import static leetcode.bean.TreeNode.newTreeNode;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 530. Minimum Absolute Difference in BST
 *
 * @link https://leetcode.com/problems/minimum-absolute-difference-in-bst/
 * @author zhanglei
 * @date 2022/3/22
 */
class P0530 {
    public int getMinimumDifference(TreeNode root) {
        if (root == null) {
            return -1;
        }
        Deque&lt;TreeNode&gt; deque = new LinkedList&lt;&gt;();
        deque.offerLast(root);
        TreeNode current = root;
        int prev = -1;
        int min = Integer.MAX_VALUE;
        while (!deque.isEmpty()) {
            while (current != null) {
                current = current.left;
                if (current != null) {
                    deque.offerLast(current);
                }
            }
            current = deque.pollLast();
            if (prev == -1) {
                prev = current.val;
            } else {
                if (current.val - prev &lt; min) {
                    min = current.val - prev;
                    if (min == 1) {
                        return min;
                    }
                }
                prev = current.val;
            }
            current = current.right;
            if (current != null) {
                deque.offerLast(current);
            }
        }
        return min;
    }

    @Test
    void test1() {
        assertEquals(1, getMinimumDifference(newTreeNode(4, 2, 6, 1, 3)));
    }

    @Test
    void test2() {
        assertEquals(1, getMinimumDifference(newTreeNode(1, 0, 48, null, null, 12, 49)));
    }

    @Test
    void test35() {
        assertEquals(47, getMinimumDifference(newTreeNode(543, 384, 652, null, 445, null, 699)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_501_find_mode_in_binary_search_tree"><a class="anchor" href="#_501_find_mode_in_binary_search_tree"></a>501. Find Mode in Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p05;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.*;

import static leetcode.bean.TreeNode.newTreeNode;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 501. Find Mode in Binary Search Tree
 *
 * @link https://leetcode.com/problems/find-mode-in-binary-search-tree/
 * @author zhanglei
 * @date 2022/3/22
 */
class P0501 {
    public int[] findMode(TreeNode root) {
        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();
        int frequency = 0;
        Deque&lt;TreeNode&gt; deque = new ArrayDeque&lt;&gt;();
        TreeNode current = root;
        deque.offerLast(current);
        Integer prev = null;
        int currFrequency = 0;
        while (!deque.isEmpty()) {
            while (current != null) {
                current = current.left;
                if (current != null) {
                    deque.offerLast(current);
                }
            }
            current = deque.pollLast();
            if (prev == null) {
                prev = current.val;
                currFrequency++;
            } else if (current.val != prev) {
                if (currFrequency &gt; frequency) {
                    result.clear();
                    result.add(prev);
                    frequency = currFrequency;
                } else if (currFrequency == frequency) {
                    result.add(prev);
                }
                currFrequency = 1;
                prev = current.val;
            } else {
                currFrequency++;
            }
            current = current.right;
            if (current != null) {
                deque.offerLast(current);
            }
        }
        if (currFrequency &gt; frequency) {
            result.clear();
            result.add(prev);
        } else if (currFrequency == frequency) {
            result.add(prev);
        }
        return result.stream().mapToInt(i -&gt; (int) i).toArray();
    }

    @Test
    void test1() {
        assertEquals("[2]", Arrays.toString(findMode(newTreeNode(1, null, 2, 2))));
    }

    @Test
    void test2() {
        assertEquals("[0]", Arrays.toString(findMode(newTreeNode(0))));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_236_lowest_common_ancestor_of_a_binary_tree"><a class="anchor" href="#_236_lowest_common_ancestor_of_a_binary_tree"></a>236. Lowest Common Ancestor of a Binary Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.*;

import static leetcode.bean.TreeNode.newTreeNode;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 236. Lowest Common Ancestor of a Binary Tree
 *
 * @link https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/
 * @author zhanglei
 * @date 2022/3/22
 */
class P0236 {
    // iterative solution
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        Map&lt;TreeNode, TreeNode&gt; parent = new HashMap&lt;&gt;();
        parent.put(root, null);
        Deque&lt;TreeNode&gt; deque = new ArrayDeque&lt;&gt;();
        deque.offer(root);
        while (!parent.containsKey(p) || !parent.containsKey(q)) {
            TreeNode node = deque.poll();
            if (node.left != null) {
                parent.put(node.left, node);
                deque.offer(node.left);
            }
            if (node.right != null) {
                parent.put(node.right, node);
                deque.offer(node.right);
            }
        }

        LinkedList&lt;TreeNode&gt; ps = findPath(p, parent);
        LinkedList&lt;TreeNode&gt; qs = findPath(q, parent);
        TreeNode result = null;
        while (ps.peek() == qs.peek()) {
            result = ps.pop();
            qs.pop();
        }
        return result;
    }

    static LinkedList&lt;TreeNode&gt; findPath(TreeNode p, Map&lt;TreeNode, TreeNode&gt; parent) {
        LinkedList&lt;TreeNode&gt; path = new LinkedList&lt;&gt;();
        TreeNode node = p;
        while (node != null) {
            path.add(0, node);
            node = parent.get(node);
        }
        return path;
    }

    /*
    // recursive solution
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if (root == null) {
            return null;
        }
        if (root == p || root == q) {
            return root;
        }
        TreeNode l = lowestCommonAncestor(root.left, p, q);
        TreeNode r = lowestCommonAncestor(root.right, p, q);
        if (l == null) {
            return r;
        }
        if (r == null) {
            return l;
        }
        return root;
    }
    */

    /*
    // Time Limit Exceeded
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        LinkedList&lt;TreeNode&gt; ps = findPath(root, p, new LinkedList&lt;&gt;());
        LinkedList&lt;TreeNode&gt; qs = findPath(root, q, new LinkedList&lt;&gt;());
        TreeNode result = null;
        while (ps.peek() == qs.peek()) {
            result = ps.pop();
            qs.pop();
        }
        return result;
    }

    static LinkedList&lt;TreeNode&gt; findPath(TreeNode root, TreeNode p, LinkedList&lt;TreeNode&gt; path) {
        path.add(root);
        if (root == p) {
            return path;
        }
        if (root.left != null) {
            LinkedList&lt;TreeNode&gt; path1 = findPath(root.left, p, clone(path));
            if (path1 != null) {
                return path1;
            }
        }
        if (root.right != null) {
            return findPath(root.right, p, clone(path));
        }

        return null;
    }

    static LinkedList&lt;TreeNode&gt; clone(LinkedList&lt;TreeNode&gt; path) {
        return new LinkedList&lt;&gt;(path);
    }
    */

    @Test
    void test1() {
        TreeNode root = newTreeNode(3, 5, 1, 6, 2, 0, 8, null, null, 7, 4);
        assertEquals(3, lowestCommonAncestor(root, root.node(5), root.node(1)).val);
    }

    @Test
    void test2() {
        TreeNode root = newTreeNode(3, 5, 1, 6, 2, 0, 8, null, null, 7, 4);
        assertEquals(5, lowestCommonAncestor(root, root.node(5), root.node(4)).val);
    }

    @Test
    void test3() {
        TreeNode root = newTreeNode(1, 2);
        assertEquals(1, lowestCommonAncestor(root, root.node(1), root.node(2)).val);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_235_lowest_common_ancestor_of_a_binary_search_tree"><a class="anchor" href="#_235_lowest_common_ancestor_of_a_binary_search_tree"></a>235. Lowest Common Ancestor of a Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p02;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.TreeNode.newTreeNode;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 235. Lowest Common Ancestor of a Binary Search Tree
 *
 * @link https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/
 * @author zhanglei
 * @date 2022/3/23
 */
class P0235 {

    // iterative solution 2
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        while (true) {
            if (root.val &gt; p.val &amp;&amp; root.val &gt; q.val) {
                root = root.left;
            } else if (root.val &lt; p.val &amp;&amp; root.val &lt; q.val) {
                root = root.right;
            } else {
                return root;
            }
        }
    }

    /*
    // recursive solution 2
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if (root.val &gt; p.val &amp;&amp; root.val &gt; q.val) {
            return lowestCommonAncestor(root.left, p, q);
        } else if (root.val &lt; p.val &amp;&amp; root.val &lt; q.val) {
            return lowestCommonAncestor(root.right, p, q);
        } else {
            return root;
        }
    }
    */

    /*
    // recursive solution 1
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if (root == null
                || root == p
                || root == q
                || (root.val &lt; p.val &amp;&amp; root.val &gt; q.val)
                || (root.val &gt; p.val &amp;&amp; root.val &lt; q.val)) {
            return root;
        } else if (root.val &gt; p.val &amp;&amp; root.val &gt; q.val) {
            return lowestCommonAncestor(root.left, p, q);
        } else {
            return lowestCommonAncestor(root.right, p, q);
        }
    }
    */

    /*
    // iterative solution 1
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        LinkedList&lt;TreeNode&gt; ps = findPath(root, p);
        LinkedList&lt;TreeNode&gt; qs = findPath(root, q);

        TreeNode result = null;
        while (ps.peekFirst() == qs.peekFirst()) {
            result = ps.pollFirst();
            qs.pollFirst();
        }
        return result;
    }

    static LinkedList&lt;TreeNode&gt; findPath(TreeNode root, TreeNode p) {
        LinkedList&lt;TreeNode&gt; path = new LinkedList&lt;&gt;();
        while (root != p) {
            path.add(root);
            if (root.val &gt; p.val) {
                root = root.left;
            } else {
                root = root.right;
            }
        }
        path.add(p);
        return path;
    }
    */

    @Test
    void test1() {
        TreeNode root = newTreeNode(6, 2, 8, 0, 4, 7, 9, null, null, 3, 5);
        assertEquals(6, lowestCommonAncestor(root, root.node(2), root.node(8)).val);
    }

    @Test
    void test2() {
        TreeNode root = newTreeNode(6, 2, 8, 0, 4, 7, 9, null, null, 3, 5);
        assertEquals(2, lowestCommonAncestor(root, root.node(2), root.node(4)).val);
    }

    @Test
    void test3() {
        TreeNode root = newTreeNode(2, 1);
        assertEquals(2, lowestCommonAncestor(root, root.node(2), root.node(1)).val);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_450_delete_node_in_a_bst"><a class="anchor" href="#_450_delete_node_in_a_bst"></a>450. Delete Node in a BST</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p04;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.TreeNode.newTreeNode;
import static leetcode.bean.TreeNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 450. Delete Node in a BST
 *
 * @link https://leetcode.com/problems/delete-node-in-a-bst/
 * @refrence
 *     https://leetcode.com/problems/delete-node-in-a-bst/discuss/93298/Iterative-solution-in-Java-O(h)-time-and-O(1)-space
 * @author zhanglei
 * @date 2021/12/2
 */
class P0450 {
    // TODO improve
    public TreeNode deleteNode(TreeNode root, int key) {
        if (root == null) {
            return null;
        }
        if (root.val &gt; key) {
            root.left = deleteNode(root.left, key);
        } else if (root.val &lt; key) {
            root.right = deleteNode(root.right, key);
        } else {
            if (root.right == null) {
                return root.left;
            } else {
                int min = findMin(root.right);
                TreeNode node = new TreeNode(min);
                node.left = root.left;
                node.right = deleteNode(root.right, min);
                return node;
            }
        }
        return root;
    }

    static int findMin(TreeNode root) {
        while (root.left != null) {
            root = root.left;
        }
        return root.val;
    }

    /*
    public TreeNode deleteNode(TreeNode root, int key) {
        if (root == null) {
            return null;
        }
        if (root.val == key) {
            if (root.left == null) {
                return root.right;
            } else if (root.right == null) {
                return root.left;
            } else {
                root.val = findMin(root.right);
                root.right = deleteNode(root.right, root.val);
            }
        } else if (root.val &lt; key) {
            root.right = deleteNode(root.right, key);
        } else if (root.val &gt; key) {
            root.left = deleteNode(root.left, key);
        }
        return root;
    }

    public int findMin(TreeNode root) {
        if (root.left != null) {
            return findMin(root.left);
        } else {
            return root.val;
        }
    }
    */

    @Test
    void test1() {
        assertEquals(
                "[5,4,6,2,null,null,7]", print(deleteNode(newTreeNode(5, 3, 6, 2, 4, null, 7), 3)));
    }

    @Test
    void test2() {
        assertEquals(
                "[5,3,6,2,4,null,7]", print(deleteNode(newTreeNode(5, 3, 6, 2, 4, null, 7), 0)));
    }

    @Test
    void test3() {
        assertEquals("[]", print(deleteNode(newTreeNode(), 0)));
    }

    @Test
    void test68() {
        assertEquals("[6,3,7,2,4]", print(deleteNode(newTreeNode(5, 3, 6, 2, 4, null, 7), 5)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_669_trim_a_binary_search_tree"><a class="anchor" href="#_669_trim_a_binary_search_tree"></a>669. Trim a Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p06;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.TreeNode.newTreeNode;
import static leetcode.bean.TreeNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 669. Trim a Binary Search Tree
 *
 * @link https://leetcode.com/problems/trim-a-binary-search-tree/
 * @author zhanglei
 * @date 2022/3/24
 */
class P0669 {
    public TreeNode trimBST(TreeNode root, int low, int high) {
        if (root == null) {
            return null;
        } else if (root.val &gt; high) {
            return trimBST(root.left, low, high);
        } else if (root.val &lt; low) {
            return trimBST(root.right, low, high);
        } else {
            root.left = trimBST(root.left, low, high);
            root.right = trimBST(root.right, low, high);
            return root;
        }
    }

    @Test
    void test1() {
        assertEquals("[1,null,2]", print(trimBST(newTreeNode(1, 0, 2), 1, 2)));
    }

    @Test
    void test2() {
        assertEquals(
                "[3,2,null,1]", print(trimBST(newTreeNode(3, 0, 4, null, 2, null, null, 1), 1, 3)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_108_convert_sorted_array_to_binary_search_tree"><a class="anchor" href="#_108_convert_sorted_array_to_binary_search_tree"></a>108. Convert Sorted Array to Binary Search Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p01;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import java.util.Arrays;

import static leetcode.bean.TreeNode.print;
import static org.junit.jupiter.api.Assertions.assertTrue;

/**
 * 108. Convert Sorted Array to Binary Search Tree
 *
 * @link https://leetcode.com/problems/convert-sorted-array-to-binary-search-tree/
 * @author zhanglei
 * @date 2022/3/24
 */
class P0108 {
    public TreeNode sortedArrayToBST(int[] nums) {
        return sortedArrayToBST(nums, 0, nums.length - 1);
    }

    TreeNode sortedArrayToBST(int[] nums, int low, int high) {
        if (low &gt; high) {
            return null;
        }
        int mid = low + high &gt;&gt;&gt; 1;
        TreeNode root = new TreeNode(nums[mid]);
        root.left = sortedArrayToBST(nums, low, mid - 1);
        root.right = sortedArrayToBST(nums, mid + 1, high);
        return root;
    }

    @Test
    void test1() {
        int[] nums = {-10, -3, 0, 5, 9};
        assertTrue(
                Arrays.asList("[0,-3,9,-10,null,5]", "[0,-10,5,null,-3,null,9]")
                        .contains(print(sortedArrayToBST(nums))));
    }

    @Test
    void test2() {
        int[] nums = {1, 3};
        assertTrue(Arrays.asList("[3,1]", "[1,null,3]").contains(print(sortedArrayToBST(nums))));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_538_convert_bst_to_greater_tree"><a class="anchor" href="#_538_convert_bst_to_greater_tree"></a>538. Convert BST to Greater Tree</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p05;

import leetcode.bean.TreeNode;
import org.junit.jupiter.api.Test;

import static leetcode.bean.TreeNode.newTreeNode;
import static leetcode.bean.TreeNode.print;
import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 538. Convert BST to Greater Tree
 *
 * @link https://leetcode.com/problems/convert-bst-to-greater-tree/
 * @author zhanglei
 * @date 2022/3/24
 */
class P0538 {

    // recursive solution
    public TreeNode convertBST(TreeNode root) {
        int[] total = new int[1];
        convertBST(root, total);
        return root;
    }

    TreeNode convertBST(TreeNode root, int[] total) {
        if (root == null) {
            return null;
        }
        root.right = convertBST(root.right, total);
        total[0] += root.val;
        root.val = total[0];
        root.left = convertBST(root.left, total);
        return root;
    }

    /*
    // iterative solution
    public TreeNode convertBST(TreeNode root) {
        if (root == null) {
            return null;
        }
        Deque&lt;TreeNode&gt; deque = new ArrayDeque&lt;&gt;();
        deque.offerLast(root);
        int total = 0;
        TreeNode current = root;
        while (!deque.isEmpty()) {
            while (current != null) {
                current = current.right;
                if (current != null) {
                    deque.offerLast(current);
                }
            }
            TreeNode node = deque.pollLast();
            total += node.val;
            node.val = total;
            current = node.left;
            if (current != null) {
                deque.offerLast(current);
            }
        }
        return root;
    }
    */

    @Test
    void test1() {
        assertEquals(
                "[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]",
                print(
                        convertBST(
                                newTreeNode(
                                        4, 1, 6, 0, 2, 5, 7, null, null, null, 3, null, null, null,
                                        8))));
    }

    @Test
    void test2() {
        assertEquals("[1,null,1]", print(convertBST(newTreeNode(0, null, 1))));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_77_combinations"><a class="anchor" href="#_77_combinations"></a>77. Combinations</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package leetcode.problems.p00;

import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * 77. Combinations
 *
 * @link https://leetcode.com/problems/combinations/
 * @author zhanglei
 * @date 2022/3/24
 */
class P0077 {

    public List&lt;List&lt;Integer&gt;&gt; combine(int n, int k) {
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        combine(n, k, new ArrayList&lt;&gt;(), result);
        return result;
    }

    // improved
    void combine(int n, int k, List&lt;Integer&gt; temp, List&lt;List&lt;Integer&gt;&gt; result) {
        if (temp.size() == k) {
            result.add(new ArrayList&lt;&gt;(temp));
        } else {
            for (int size = temp.size(), start = size == 0 ? 1 : temp.get(size - 1) + 1, i = start;
                    i &lt;= n - (k - size) + 1;
                    i++) {
                temp.add(i);
                combine(n, k, temp, result);
                temp.remove(temp.size() - 1);
            }
        }
    }

    /*
    void combine(int n, int k, List&lt;Integer&gt; temp, List&lt;List&lt;Integer&gt;&gt; result) {
        if (temp.size() == k) {
            result.add(temp);
        } else {
            for (int i = (temp.size() == 0 ? 1 : temp.get(temp.size() - 1) + 1); i &lt;= n; i++) {
                List&lt;Integer&gt; temp2 = new ArrayList&lt;&gt;(temp);
                temp2.add(i);
                combine(n, k, temp2, result);
            }
        }
    }
    */

    @Test
    void test1() {
        assertEquals("[[1, 2], [1, 3], [1, 4], [2, 3], [2, 4], [3, 4]]", combine(4, 2).toString());
    }

    @Test
    void test2() {
        assertEquals("[[1]]", combine(1, 1).toString());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_review"><a class="anchor" href="#_review"></a>Review</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_expedia_is_getting_rid_of_java_bean_transformers"><a class="anchor" href="#_how_expedia_is_getting_rid_of_java_bean_transformers"></a><a href="https://www.infoq.com/articles/expedia-rid-of-bean-transformers/">How Expedia Is Getting Rid of Java Bean Transformers</a></h3>
<div class="paragraph">
<p>BULL support copy with Java Collection type. e.g. List&lt;BeanA&gt; &#8658; List&lt;BeanB&gt;</p>
</div>
<div class="paragraph">
<p>Old Spring BeanUtils.copyProperties ignore generics,
<a href="https://github.com/spring-projects/spring-framework/issues/24187">Honor generic type information when copying properties with BeanUtils</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tip"><a class="anchor" href="#_tip"></a>Tip</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_gpg_to_encrypt_your_data"><a class="anchor" href="#_using_gpg_to_encrypt_your_data"></a>Using GPG to Encrypt Your Data</h3>
<div class="paragraph">
<p>encrypt</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg --armor --symmetric --cipher-algo AES256 file.txt</pre>
</div>
</div>
<div class="paragraph">
<p>decrypt</p>
</div>
<div class="listingblock">
<div class="content">
<pre>gpg -o file.txt -d file.txt.asc</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_8_read_and_write_file_without_3rd_part_library"><a class="anchor" href="#_java_8_read_and_write_file_without_3rd_part_library"></a>Java 8 read and write file without 3rd part library</h3>
<div class="listingblock">
<div class="content">
<pre>try (Stream&lt;String&gt; stream = Files.lines(Paths.get("build.gradle"))) {
    stream.forEach(System.out::println);
} catch (IOException e) {
    e.printStackTrace();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Files.write(Paths.get("build.txt"), "Hello World".getBytes(StandardCharsets.UTF_8));</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_share"><a class="anchor" href="#_share"></a>Share</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_grokking_simplicity_taming_complex_software_with_functional_thinking"><a class="anchor" href="#_grokking_simplicity_taming_complex_software_with_functional_thinking"></a>Grokking simplicity: taming complex software with functional thinking</h3>
<div class="sect3">
<h4 id="_chapter_15_isolating_timelines"><a class="anchor" href="#_chapter_15_isolating_timelines"></a>Chapter 15. Isolating timelines</h4>
<div class="paragraph">
<p>Different languages, different threading models</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Single-threaded, synchronous</p>
<div class="paragraph">
<p>PHP runs this way if you don’t import the threading library</p>
</div>
</li>
<li>
<p>Single-threaded, asynchronous</p>
<div class="paragraph">
<p>JavaScript</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/javascript-asynchronous-queue.png" alt="javascript asynchronous queue">
</div>
<div class="title">Figure 1. JavaScript’s asynchronous queue</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ajax-event-queue.png" alt="ajax event queue">
</div>
<div class="title">Figure 2. AJAX and the event queue</div>
</div>
</li>
<li>
<p>Multi-threaded</p>
<div class="paragraph">
<p>Java, Python, Ruby, C, and C# (among many others)</p>
</div>
</li>
<li>
<p>Message-passing processes</p>
<div class="paragraph">
<p>Erlang and Elixir</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
    <div class="footer-tools">
        <a href="#top" title="Reach the top of the page">Back to top</a>
    </div>
<script src="../../../_/js/vendor/algoliasearch-77ad57d83c.js"></script>
<script src="../../../_/js/site-ca1c0b0367.js"></script>
<script async src="../../../_/js/vendor/highlight-0a351063af.js"></script>
<script async src="../../../_/js/vendor/svg4everybody-195d47ce7d.js"></script>
              </body>
</html>
